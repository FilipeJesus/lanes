<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Documentation - Lanes</title>
    <meta name="description" content="Complete documentation for Lanes - Learn how to manage multiple Claude Code sessions in VS Code using Git worktrees.">
    <link rel="icon" type="image/png" href="https://github.com/FilipeJesus/lanes/raw/main/media/lanes-default-64px.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        vscode: {
                            bg: '#1e1e1e',
                            sidebar: '#252526',
                            accent: '#007acc',
                            text: '#cccccc'
                        }
                    },
                    fontFamily: {
                        mono: ['SFMono-Regular', 'Menlo', 'Monaco', 'Consolas', 'monospace'],
                        sans: ['system-ui', '-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <script>
        // Theme toggle - check localStorage, default to dark mode
        if (localStorage.theme === 'light') {
            document.documentElement.classList.remove('dark');
        } else {
            document.documentElement.classList.add('dark');
        }
    </script>
    <style>
        .terminal-shadow { box-shadow: 0 10px 30px -10px rgba(0,0,0,0.5); }
        .glow { box-shadow: 0 0 20px rgba(0, 122, 204, 0.3); }
        @keyframes pulse-slow { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
        .animate-pulse-slow { animation: pulse-slow 2s ease-in-out infinite; }

        /* Sidebar styling */
        .sidebar-link {
            transition: all 0.2s ease;
            color: #6b7280;
        }
        .dark .sidebar-link {
            color: #9ca3af;
        }
        .sidebar-link:hover {
            background-color: rgba(0, 0, 0, 0.05);
            color: #111827;
        }
        .dark .sidebar-link:hover {
            background-color: rgba(255, 255, 255, 0.05);
            color: #ffffff;
        }
        .sidebar-link.active {
            background-color: #007acc;
            color: #ffffff !important;
        }
        .sidebar-link.active svg {
            color: #ffffff;
        }

        /* Mobile nav link styling */
        .mobile-nav-link {
            transition: all 0.2s ease;
            color: #6b7280;
        }
        .dark .mobile-nav-link {
            color: #9ca3af;
        }
        .mobile-nav-link:hover {
            background-color: rgba(0, 0, 0, 0.05);
            color: #111827;
        }
        .dark .mobile-nav-link:hover {
            background-color: rgba(255, 255, 255, 0.05);
            color: #ffffff;
        }
        .mobile-nav-link.active {
            background-color: #007acc;
            color: #ffffff !important;
        }
        .mobile-nav-link.active svg {
            color: #ffffff;
        }

        /* Section transitions */
        .doc-section {
            animation: fadeIn 0.3s ease;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Sticky sidebar */
        @media (min-width: 1024px) {
            .docs-sidebar {
                position: sticky;
                top: 6rem;
                height: fit-content;
                max-height: calc(100vh - 8rem);
                overflow-y: auto;
            }
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-vscode-bg text-gray-700 dark:text-gray-300 font-sans antialiased selection:bg-vscode-accent selection:text-white transition-colors duration-200">

    <!-- Navigation -->
    <nav class="fixed w-full z-50 bg-white/90 dark:bg-vscode-bg/90 backdrop-blur-sm border-b border-gray-200 dark:border-white/10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center gap-2">
                    <a href="index.html" class="flex items-center gap-2">
                        <img src="https://github.com/FilipeJesus/lanes/raw/main/media/lanes-default-64px.png" alt="Lanes Logo" class="w-8 h-8">
                        <span class="text-xl font-bold text-gray-900 dark:text-white tracking-tight">Lanes</span>
                    </a>
                    <span class="text-xs bg-green-500/20 text-green-600 dark:text-green-400 px-2 py-0.5 rounded-full font-medium">Free Forever</span>
                    <span class="text-xs bg-blue-500/20 text-blue-600 dark:text-blue-400 px-2 py-0.5 rounded-full font-medium">All Local</span>
                </div>
                <!-- Desktop Navigation -->
                <div class="hidden md:flex items-center">
                    <div class="ml-10 flex items-baseline space-x-8">
                        <a href="index.html" class="text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors">Home</a>
                        <a href="index.html#features" class="text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors">Features</a>
                        <a href="index.html#how-it-works" class="text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors">How it Works</a>
                        <a href="https://github.com/FilipeJesus/lanes" class="bg-vscode-accent hover:bg-blue-600 text-white px-4 py-2 rounded-md font-medium transition-all">
                            View on GitHub
                        </a>
                    </div>
                    <button id="theme-toggle" class="ml-6 p-2 rounded-lg bg-gray-200 dark:bg-white/10 hover:bg-gray-300 dark:hover:bg-white/20 transition-colors" aria-label="Toggle theme">
                        <svg id="sun-icon" class="w-5 h-5 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>
                        <svg id="moon-icon" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>
                    </button>
                </div>

                <!-- Mobile Navigation Controls -->
                <div class="flex md:hidden items-center gap-2">
                    <button id="theme-toggle-mobile" class="p-2 rounded-lg bg-gray-200 dark:bg-white/10 hover:bg-gray-300 dark:hover:bg-white/20 transition-colors" aria-label="Toggle theme">
                        <svg id="sun-icon-mobile" class="w-5 h-5 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>
                        <svg id="moon-icon-mobile" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>
                    </button>
                    <button id="main-mobile-nav-toggle" class="p-2 rounded-lg bg-gray-200 dark:bg-white/10 hover:bg-gray-300 dark:hover:bg-white/20 transition-colors" aria-label="Toggle navigation menu">
                        <svg id="hamburger-icon" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
                        <svg id="close-icon" class="w-5 h-5 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                    </button>
                </div>
            </div>

            <!-- Mobile Navigation Menu -->
            <div id="main-mobile-nav" class="hidden md:hidden border-t border-gray-200 dark:border-white/10 bg-white/95 dark:bg-vscode-bg/95">
                <div class="px-4 py-3 space-y-2">
                    <a href="index.html" class="block py-2 px-3 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-white/5 rounded-md transition-colors">Home</a>
                    <a href="index.html#features" class="block py-2 px-3 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-white/5 rounded-md transition-colors">Features</a>
                    <a href="index.html#how-it-works" class="block py-2 px-3 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-white/5 rounded-md transition-colors">How it Works</a>
                    <a href="https://github.com/FilipeJesus/lanes" class="block py-2 px-3 bg-vscode-accent hover:bg-blue-600 text-white rounded-md font-medium transition-all text-center">View on GitHub</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="pt-24 pb-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="lg:grid lg:grid-cols-12 lg:gap-8">

                <!-- Sidebar Navigation -->
                <aside class="hidden lg:block lg:col-span-3 docs-sidebar">
                    <div class="bg-white dark:bg-vscode-sidebar rounded-xl border border-gray-200 dark:border-white/10 p-4">
                        <h3 class="text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-3">Sessions</h3>
                        <nav class="space-y-1">
                            <button data-section="create-session" class="sidebar-link active w-full flex items-center gap-3 py-2 px-3 text-sm text-left rounded-lg">
                                <svg class="w-4 h-4 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                <span>Create a New Session</span>
                            </button>
                            <button data-section="worktrees" class="sidebar-link w-full flex items-center gap-3 py-2 px-3 text-sm text-left rounded-lg">
                                <svg class="w-4 h-4 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path></svg>
                                <span>Understanding Worktrees</span>
                            </button>
                            <button data-section="permission-modes" class="sidebar-link w-full flex items-center gap-3 py-2 px-3 text-sm text-left rounded-lg">
                                <svg class="w-4 h-4 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg>
                                <span>Permission Modes</span>
                            </button>
                            <button data-section="git-review" class="sidebar-link w-full flex items-center gap-3 py-2 px-3 text-sm text-left rounded-lg">
                                <svg class="w-4 h-4 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                                <span>Reviewing Changes</span>
                            </button>
                        </nav>

                        <!-- Workflow Section Group -->
                        <div class="mt-6 pt-4 border-t border-gray-200 dark:border-white/10">
                            <h3 class="text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-3">Workflows</h3>
                            <nav class="space-y-1">
                                <button data-section="workflows-intro" class="sidebar-link w-full flex items-center gap-3 py-2 px-3 text-sm text-left rounded-lg">
                                    <svg class="w-4 h-4 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                                    <span>Introduction to Workflows</span>
                                </button>
                                <button data-section="workflow-structure" class="sidebar-link w-full flex items-center gap-3 py-2 px-3 text-sm text-left rounded-lg">
                                    <svg class="w-4 h-4 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"></path></svg>
                                    <span>Workflow Structure</span>
                                </button>
                                <button data-section="creating-workflow" class="sidebar-link w-full flex items-center gap-3 py-2 px-3 text-sm text-left rounded-lg">
                                    <svg class="w-4 h-4 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>
                                    <span>Creating a Workflow</span>
                                </button>
                                <button data-section="lanes-mcp" class="sidebar-link w-full flex items-center gap-3 py-2 px-3 text-sm text-left rounded-lg">
                                    <svg class="w-4 h-4 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                                    <span>Lanes MCP</span>
                                </button>
                            </nav>
                        </div>
                    </div>
                </aside>

                <!-- Mobile Navigation (collapsible) -->
                <div class="lg:hidden mb-8">
                    <button id="mobile-nav-toggle" class="w-full bg-white dark:bg-vscode-sidebar rounded-xl border border-gray-200 dark:border-white/10 p-4 flex items-center justify-between text-gray-900 dark:text-white font-medium">
                        <span id="mobile-nav-current">Create a New Session</span>
                        <svg class="w-5 h-5 transition-transform" id="mobile-nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </button>
                    <nav id="mobile-nav" class="hidden mt-2 bg-white dark:bg-vscode-sidebar rounded-xl border border-gray-200 dark:border-white/10 p-4">
                        <!-- Getting Started -->
                        <p class="text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-2 px-3">Documentation</p>
                        <div class="space-y-1 mb-4">
                            <button data-section="create-session" class="mobile-nav-link active w-full flex items-center gap-3 py-2 px-3 text-sm text-left rounded-lg">
                                <svg class="w-4 h-4 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                <span>Create a New Session</span>
                            </button>
                            <button data-section="worktrees" class="mobile-nav-link w-full flex items-center gap-3 py-2 px-3 text-sm text-left rounded-lg">
                                <svg class="w-4 h-4 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path></svg>
                                <span>Understanding Worktrees</span>
                            </button>
                            <button data-section="permission-modes" class="mobile-nav-link w-full flex items-center gap-3 py-2 px-3 text-sm text-left rounded-lg">
                                <svg class="w-4 h-4 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg>
                                <span>Permission Modes</span>
                            </button>
                            <button data-section="git-review" class="mobile-nav-link w-full flex items-center gap-3 py-2 px-3 text-sm text-left rounded-lg">
                                <svg class="w-4 h-4 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                                <span>Reviewing Changes</span>
                            </button>
                        </div>
                        <!-- Workflows -->
                        <div class="border-t border-gray-200 dark:border-white/10 pt-3">
                            <p class="text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-2 px-3">Workflows</p>
                            <div class="space-y-1">
                                <button data-section="workflows-intro" class="mobile-nav-link w-full flex items-center gap-3 py-2 px-3 text-sm text-left rounded-lg">
                                    <svg class="w-4 h-4 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                                    <span>Introduction to Workflows</span>
                                </button>
                                <button data-section="workflow-structure" class="mobile-nav-link w-full flex items-center gap-3 py-2 px-3 text-sm text-left rounded-lg">
                                    <svg class="w-4 h-4 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"></path></svg>
                                    <span>Workflow Structure</span>
                                </button>
                                <button data-section="creating-workflow" class="mobile-nav-link w-full flex items-center gap-3 py-2 px-3 text-sm text-left rounded-lg">
                                    <svg class="w-4 h-4 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>
                                    <span>Creating a Workflow</span>
                                </button>
                                <button data-section="lanes-mcp" class="mobile-nav-link w-full flex items-center gap-3 py-2 px-3 text-sm text-left rounded-lg">
                                    <svg class="w-4 h-4 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                                    <span>Lanes MCP</span>
                                </button>
                            </div>
                        </div>
                    </nav>
                </div>

                <!-- Main Documentation Content -->
                <div class="lg:col-span-9">
                    <div class="prose prose-gray dark:prose-invert max-w-none">

                        <!-- Page Header -->
                        <div class="mb-8">
                            <h1 class="text-4xl font-bold text-gray-900 dark:text-white mb-2">Documentation</h1>
                            <p class="text-lg text-gray-600 dark:text-gray-400">
                                Everything you need to get started with Lanes.
                            </p>
                        </div>

                        <!-- Section 1: Create a New Session -->
                        <section id="create-session" class="doc-section mb-16 scroll-mt-24">
                            <div class="bg-white dark:bg-vscode-sidebar rounded-xl border border-gray-200 dark:border-white/10 p-8">
                                <div class="flex items-center gap-4 mb-6">
                                    <div class="w-12 h-12 rounded-lg bg-vscode-accent/10 flex items-center justify-center">
                                        <svg class="w-6 h-6 text-vscode-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                    </div>
                                    <h2 class="text-3xl font-bold text-gray-900 dark:text-white">Create a New Session</h2>
                                </div>
                                <p class="text-gray-600 dark:text-gray-400 mb-6">
                                    Creating a new session in Lanes is straightforward. Each session is isolated and runs in its own Git worktree, giving Claude Code a clean workspace to work in without affecting your main codebase.
                                </p>

                                <div class="space-y-8">
                                    <!-- Step 1: Prerequisites -->
                                    <div>
                                        <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-3">Before You Start</h3>
                                        <p class="text-gray-600 dark:text-gray-400 mb-3">
                                            Make sure you have:
                                        </p>
                                        <ul class="list-disc list-inside text-gray-600 dark:text-gray-400 space-y-2 ml-4">
                                            <li>Opened a folder or workspace in VS Code</li>
                                            <li>A Git repository initialized (<code class="text-sm bg-gray-200 dark:bg-black/30 px-1 rounded">git init</code> if needed)</li>
                                            <li>Claude Code installed globally (<code class="text-sm bg-gray-200 dark:bg-black/30 px-1 rounded">npm install -g @anthropic-ai/claude-code</code>)</li>
                                            <li>Logged into Claude (<code class="text-sm bg-gray-200 dark:bg-black/30 px-1 rounded">claude login</code>)</li>
                                            <li><code class="text-sm bg-gray-200 dark:bg-black/30 px-1 rounded">jq</code> installed for status tracking (<code class="text-sm bg-gray-200 dark:bg-black/30 px-1 rounded">brew install jq</code> on macOS or <code class="text-sm bg-gray-200 dark:bg-black/30 px-1 rounded">apt install jq</code> on Linux)</li>
                                        </ul>
                                        <div class="bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-3 mt-3">
                                            <p class="text-xs text-yellow-800 dark:text-yellow-300">
                                                <strong>Note:</strong> Lanes currently supports macOS and Linux. Windows is not yet supported (WSL may work).
                                            </p>
                                        </div>
                                    </div>

                                    <!-- Step 2: Open Lanes Sidebar -->
                                    <div>
                                        <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-3">Step 1: Open the Lanes Sidebar</h3>
                                        <p class="text-gray-600 dark:text-gray-400 mb-3">
                                            Click the Lanes icon in the VS Code activity bar (the vertical bar on the far left) to open the Lanes panel. You'll see the session creation form at the top.
                                        </p>
                                        <div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mt-3">
                                            <div class="flex gap-2">
                                                <svg class="w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                                <div>
                                                    <p class="text-sm text-blue-800 dark:text-blue-300 font-medium">Tip</p>
                                                    <p class="text-sm text-blue-700 dark:text-blue-400 mt-1">
                                                        Can't find the Lanes icon? Use the command palette (<kbd class="text-xs bg-blue-100 dark:bg-blue-800 px-1 rounded">Cmd+Shift+P</kbd>) and search for "Lanes: Create Session".
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Step 3: Fill in Session Details -->
                                    <div>
                                        <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-3">Step 2: Fill in the Session Form</h3>
                                        <p class="text-gray-600 dark:text-gray-400 mb-4">
                                            The form has several fields to configure your session. Here's what each one does:
                                        </p>

                                        <div class="space-y-6">
                                            <!-- Session Name -->
                                            <div class="bg-gray-50 dark:bg-black/30 rounded-lg p-4">
                                                <h4 class="font-bold text-gray-900 dark:text-white mb-2 flex items-center gap-2">
                                                    <span class="w-6 h-6 bg-vscode-accent text-white rounded-full flex items-center justify-center text-xs font-bold">1</span>
                                                    Session Name <span class="text-red-500 ml-1">*</span>
                                                </h4>
                                                <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">
                                                    A unique identifier for your session. This becomes the Git branch name, so use descriptive, Git-safe names.
                                                </p>
                                                <div class="bg-gray-100 dark:bg-black/40 rounded p-3 font-mono text-sm text-gray-700 dark:text-gray-300 mb-2">
                                                    <span class="text-green-600 dark:text-green-400">✓ Good:</span> fix-login-bug, add-dark-mode, refactor-api-client<br>
                                                    <span class="text-red-600 dark:text-red-400">✗ Bad:</span> my session, task#123, testing!!!
                                                </div>
                                                <p class="text-xs text-gray-500 dark:text-gray-500 italic">
                                                    Allowed characters: letters, numbers, hyphens, underscores, dots, and slashes
                                                </p>
                                            </div>

                                            <!-- Source Branch -->
                                            <div class="bg-gray-50 dark:bg-black/30 rounded-lg p-4">
                                                <h4 class="font-bold text-gray-900 dark:text-white mb-2 flex items-center gap-2">
                                                    <span class="w-6 h-6 bg-gray-400 text-white rounded-full flex items-center justify-center text-xs font-bold">2</span>
                                                    Source Branch (optional)
                                                </h4>
                                                <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">
                                                    The branch to create the worktree from. If left empty, Lanes uses your current HEAD.
                                                </p>
                                                <div class="bg-gray-100 dark:bg-black/40 rounded p-3 text-sm text-gray-700 dark:text-gray-300">
                                                    <strong>Example:</strong> Enter <code class="bg-gray-200 dark:bg-black/60 px-1 rounded">main</code> to always start from main, or <code class="bg-gray-200 dark:bg-black/60 px-1 rounded">develop</code> for your development branch.
                                                </div>
                                                <div class="bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded p-3 mt-3">
                                                    <p class="text-xs text-yellow-800 dark:text-yellow-300">
                                                        <strong>Note:</strong> The source branch must already exist. Lanes will create a new branch (with the session name) from this branch.
                                                    </p>
                                                </div>
                                            </div>

                                            <!-- Starting Prompt -->
                                            <div class="bg-gray-50 dark:bg-black/30 rounded-lg p-4">
                                                <h4 class="font-bold text-gray-900 dark:text-white mb-2 flex items-center gap-2">
                                                    <span class="w-6 h-6 bg-gray-400 text-white rounded-full flex items-center justify-center text-xs font-bold">3</span>
                                                    Starting Prompt (optional)
                                                </h4>
                                                <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">
                                                    The initial task description sent to Claude Code when the session starts. Be specific about what you want Claude to do.
                                                </p>
                                                <div class="bg-gray-100 dark:bg-black/40 rounded p-3 font-mono text-xs text-gray-700 dark:text-gray-300 mb-2">
                                                    Example: "Fix the authentication bug where users get logged out after 5 minutes. The issue seems to be in the token refresh logic in src/auth/TokenManager.ts"
                                                </div>
                                                <p class="text-xs text-gray-500 dark:text-gray-500 italic">
                                                    Leave empty if you want to start with a blank session and provide instructions manually.
                                                </p>
                                            </div>

                                            <!-- Acceptance Criteria -->
                                            <div class="bg-gray-50 dark:bg-black/30 rounded-lg p-4">
                                                <h4 class="font-bold text-gray-900 dark:text-white mb-2 flex items-center gap-2">
                                                    <span class="w-6 h-6 bg-gray-400 text-white rounded-full flex items-center justify-center text-xs font-bold">4</span>
                                                    Acceptance Criteria (optional)
                                                </h4>
                                                <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">
                                                    Define what success looks like. Claude will use this to know when the task is complete.
                                                </p>
                                                <div class="bg-gray-100 dark:bg-black/40 rounded p-3 font-mono text-xs text-gray-700 dark:text-gray-300">
                                                    Example:<br>
                                                    - Users stay logged in for at least 30 minutes<br>
                                                    - Token refresh happens automatically before expiration<br>
                                                    - All existing tests still pass
                                                </div>
                                            </div>

                                            <!-- Permission Mode -->
                                            <div class="bg-gray-50 dark:bg-black/30 rounded-lg p-4">
                                                <h4 class="font-bold text-gray-900 dark:text-white mb-2 flex items-center gap-2">
                                                    <span class="w-6 h-6 bg-vscode-accent text-white rounded-full flex items-center justify-center text-xs font-bold">5</span>
                                                    Permission Mode
                                                </h4>
                                                <p class="text-sm text-gray-600 dark:text-gray-400 mb-3">
                                                    Controls what Claude Code can do without asking for permission. Choose based on your trust level and workflow:
                                                </p>
                                                <div class="space-y-2 text-sm">
                                                    <div class="flex gap-2">
                                                        <code class="bg-gray-200 dark:bg-black/40 px-2 py-0.5 rounded text-xs flex-shrink-0">default</code>
                                                        <span class="text-gray-600 dark:text-gray-400">Standard behavior - asks for permission on sensitive operations</span>
                                                    </div>
                                                    <div class="flex gap-2">
                                                        <code class="bg-gray-200 dark:bg-black/40 px-2 py-0.5 rounded text-xs flex-shrink-0">acceptEdits</code>
                                                        <span class="text-gray-600 dark:text-gray-400">Auto-accepts file edits (recommended for most workflows)</span>
                                                    </div>
                                                    <div class="flex gap-2">
                                                        <code class="bg-gray-200 dark:bg-black/40 px-2 py-0.5 rounded text-xs flex-shrink-0">plan</code>
                                                        <span class="text-gray-600 dark:text-gray-400">Claude proposes changes but doesn't execute them</span>
                                                    </div>
                                                    <div class="flex gap-2">
                                                        <code class="bg-gray-200 dark:bg-black/40 px-2 py-0.5 rounded text-xs flex-shrink-0">dontAsk</code>
                                                        <span class="text-gray-600 dark:text-gray-400">Never prompts for permission (fully autonomous)</span>
                                                    </div>
                                                    <div class="flex gap-2">
                                                        <code class="bg-gray-200 dark:bg-black/40 px-2 py-0.5 rounded text-xs flex-shrink-0">bypassPermissions</code>
                                                        <span class="text-gray-600 dark:text-gray-400">Runs all commands automatically (use with caution)</span>
                                                    </div>
                                                </div>
                                                <div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded p-3 mt-3">
                                                    <p class="text-xs text-blue-800 dark:text-blue-300">
                                                        <strong>Recommendation:</strong> Start with <code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">default</code> or <code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">acceptEdits</code> until you're comfortable with how Claude works.
                                                    </p>
                                                </div>
                                            </div>

                                            <!-- Workflow Template -->
                                            <div class="bg-gray-50 dark:bg-black/30 rounded-lg p-4">
                                                <h4 class="font-bold text-gray-900 dark:text-white mb-2 flex items-center gap-2">
                                                    <span class="w-6 h-6 bg-gray-400 text-white rounded-full flex items-center justify-center text-xs font-bold">6</span>
                                                    Workflow Template (optional)
                                                </h4>
                                                <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">
                                                    Choose a structured workflow to guide Claude through your task. Workflows define clear phases like plan, implement, test, and review.
                                                </p>
                                                <div class="space-y-2 text-sm mb-3">
                                                    <div class="flex gap-2 items-start">
                                                        <span class="text-gray-500 dark:text-gray-500 flex-shrink-0">•</span>
                                                        <div>
                                                            <strong class="text-gray-900 dark:text-white">None (ad-hoc mode):</strong>
                                                            <span class="text-gray-600 dark:text-gray-400"> Freeform session - Claude works without a predefined structure</span>
                                                        </div>
                                                    </div>
                                                    <div class="flex gap-2 items-start">
                                                        <span class="text-gray-500 dark:text-gray-500 flex-shrink-0">•</span>
                                                        <div>
                                                            <strong class="text-gray-900 dark:text-white">Custom Workflows:</strong>
                                                            <span class="text-gray-600 dark:text-gray-400"> Your own workflows from <code class="text-xs bg-gray-200 dark:bg-black/40 px-1 rounded">.lanes/workflows/</code></span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <p class="text-xs text-gray-500 dark:text-gray-500 italic">
                                                    Click the refresh button (↻) to reload the workflow list if you just added new workflow files.
                                                </p>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Step 4: Create the Session -->
                                    <div>
                                        <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-3">Step 3: Click "Create Session"</h3>
                                        <p class="text-gray-600 dark:text-gray-400 mb-4">
                                            Once you've filled in the required fields, click the <strong>Create Session</strong> button. Lanes will:
                                        </p>
                                        <div class="space-y-3">
                                            <div class="flex gap-3 items-start">
                                                <div class="w-6 h-6 bg-green-500 text-white rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5">1</div>
                                                <div>
                                                    <p class="text-gray-900 dark:text-white font-medium">Create a new Git worktree</p>
                                                    <p class="text-sm text-gray-600 dark:text-gray-400">Located at <code class="text-xs bg-gray-200 dark:bg-black/30 px-1 rounded">.worktrees/[session-name]</code> - a complete, isolated copy of your repository</p>
                                                </div>
                                            </div>
                                            <div class="flex gap-3 items-start">
                                                <div class="w-6 h-6 bg-green-500 text-white rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5">2</div>
                                                <div>
                                                    <p class="text-gray-900 dark:text-white font-medium">Create a new branch</p>
                                                    <p class="text-sm text-gray-600 dark:text-gray-400">Named after your session, branched from the source branch (or current HEAD)</p>
                                                </div>
                                            </div>
                                            <div class="flex gap-3 items-start">
                                                <div class="w-6 h-6 bg-green-500 text-white rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5">3</div>
                                                <div>
                                                    <p class="text-gray-900 dark:text-white font-medium">Open a dedicated terminal</p>
                                                    <p class="text-sm text-gray-600 dark:text-gray-400">Each session gets its own terminal window in VS Code</p>
                                                </div>
                                            </div>
                                            <div class="flex gap-3 items-start">
                                                <div class="w-6 h-6 bg-green-500 text-white rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5">4</div>
                                                <div>
                                                    <p class="text-gray-900 dark:text-white font-medium">Launch Claude Code</p>
                                                    <p class="text-sm text-gray-600 dark:text-gray-400">With your starting prompt (if provided) and selected permission mode</p>
                                                </div>
                                            </div>
                                            <div class="flex gap-3 items-start">
                                                <div class="w-6 h-6 bg-green-500 text-white rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5">5</div>
                                                <div>
                                                    <p class="text-gray-900 dark:text-white font-medium">Initialize workflow (if selected)</p>
                                                    <p class="text-sm text-gray-600 dark:text-gray-400">Sets up the MCP server and prepares the workflow state</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- What Happens Next -->
                                    <div class="bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-6">
                                        <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-3">What Happens Next?</h3>
                                        <div class="space-y-3 text-gray-700 dark:text-gray-300">
                                            <p>
                                                <strong>Terminal Opens:</strong> You'll see a new terminal window appear with Claude Code running. The terminal title shows your session name.
                                            </p>
                                            <p>
                                                <strong>Session Appears in Sidebar:</strong> Your new session shows up in the "Active Sessions" list in the Lanes sidebar with a real-time status indicator.
                                            </p>
                                            <p>
                                                <strong>Claude Starts Working:</strong> If you provided a starting prompt, Claude immediately begins working on your task. Otherwise, it waits for your instructions.
                                            </p>
                                            <p>
                                                <strong>Isolated Environment:</strong> All changes Claude makes are contained in the worktree. Your main working directory remains untouched.
                                            </p>
                                        </div>
                                    </div>

                                    <!-- Tips and Best Practices -->
                                    <div>
                                        <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-3">Tips for Success</h3>
                                        <div class="space-y-3">
                                            <div class="flex gap-3 items-start">
                                                <svg class="w-5 h-5 text-green-600 dark:text-green-400 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                                <div>
                                                    <p class="text-sm text-gray-900 dark:text-white font-medium">Use descriptive session names</p>
                                                    <p class="text-sm text-gray-600 dark:text-gray-400">Names like <code class="text-xs bg-gray-200 dark:bg-black/30 px-1 rounded">fix-user-logout-bug</code> are more helpful than <code class="text-xs bg-gray-200 dark:bg-black/30 px-1 rounded">session1</code></p>
                                                </div>
                                            </div>
                                            <div class="flex gap-3 items-start">
                                                <svg class="w-5 h-5 text-green-600 dark:text-green-400 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                                <div>
                                                    <p class="text-sm text-gray-900 dark:text-white font-medium">Be specific in your prompts</p>
                                                    <p class="text-sm text-gray-600 dark:text-gray-400">Include file paths, expected behavior, and any relevant context</p>
                                                </div>
                                            </div>
                                            <div class="flex gap-3 items-start">
                                                <svg class="w-5 h-5 text-green-600 dark:text-green-400 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                                <div>
                                                    <p class="text-sm text-gray-900 dark:text-white font-medium">Start with a clean working directory</p>
                                                    <p class="text-sm text-gray-600 dark:text-gray-400">Commit or stash changes in your main branch before creating sessions</p>
                                                </div>
                                            </div>
                                            <div class="flex gap-3 items-start">
                                                <svg class="w-5 h-5 text-green-600 dark:text-green-400 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                                <div>
                                                    <p class="text-sm text-gray-900 dark:text-white font-medium">Use workflows for complex tasks</p>
                                                    <p class="text-sm text-gray-600 dark:text-gray-400">Features with multiple files, testing requirements, or documentation needs benefit from structured workflows</p>
                                                </div>
                                            </div>
                                            <div class="flex gap-3 items-start">
                                                <svg class="w-5 h-5 text-green-600 dark:text-green-400 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                                <div>
                                                    <p class="text-sm text-gray-900 dark:text-white font-medium">One task per session</p>
                                                    <p class="text-sm text-gray-600 dark:text-gray-400">Keep sessions focused on a single goal - create multiple sessions for multiple tasks</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Common Issues -->
                                    <div>
                                        <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-3">Troubleshooting Common Issues</h3>
                                        <div class="space-y-3">
                                            <div class="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4">
                                                <p class="text-sm font-bold text-red-900 dark:text-red-300 mb-1">Error: "Session name already exists"</p>
                                                <p class="text-sm text-red-700 dark:text-red-400">A session with this name is already active, or a branch with this name exists. Choose a different name or delete the existing session first.</p>
                                            </div>
                                            <div class="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4">
                                                <p class="text-sm font-bold text-red-900 dark:text-red-300 mb-1">Error: "Not a git repository"</p>
                                                <p class="text-sm text-red-700 dark:text-red-400">Run <code class="bg-red-100 dark:bg-red-800 px-1 rounded">git init</code> in your project folder to initialize a Git repository.</p>
                                            </div>
                                            <div class="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4">
                                                <p class="text-sm font-bold text-red-900 dark:text-red-300 mb-1">Error: "Claude Code not found"</p>
                                                <p class="text-sm text-red-700 dark:text-red-400">Install Claude Code globally: <code class="bg-red-100 dark:bg-red-800 px-1 rounded">npm install -g @anthropic-ai/claude-code</code></p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>

                        <!-- Section 2: Understanding Worktrees -->
                        <section id="worktrees" class="doc-section mb-16 scroll-mt-24 hidden">
                            <div class="bg-white dark:bg-vscode-sidebar rounded-xl border border-gray-200 dark:border-white/10 p-8">
                                <div class="flex items-center gap-4 mb-6">
                                    <div class="w-12 h-12 rounded-lg bg-vscode-accent/10 flex items-center justify-center">
                                        <svg class="w-6 h-6 text-vscode-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path></svg>
                                    </div>
                                    <h2 class="text-3xl font-bold text-gray-900 dark:text-white">Understanding Worktrees</h2>
                                </div>
                                <p class="text-gray-600 dark:text-gray-400 mb-6">
                                    Git worktrees are the foundation of Lanes' isolation strategy. They allow you to have multiple working directories attached to the same repository, enabling you to work on multiple tasks simultaneously without conflicts.
                                </p>

                                <div class="space-y-8">
                                    <!-- What are Git Worktrees? -->
                                    <div>
                                        <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-3">What are Git Worktrees?</h3>
                                        <p class="text-gray-600 dark:text-gray-400 mb-4">
                                            Imagine you're working on a feature in your project, but suddenly need to fix a critical bug. Normally, you'd have to:
                                        </p>
                                        <ul class="list-disc list-inside text-gray-600 dark:text-gray-400 space-y-2 ml-4 mb-4">
                                            <li>Stash or commit your incomplete work</li>
                                            <li>Switch branches</li>
                                            <li>Fix the bug</li>
                                            <li>Switch back</li>
                                            <li>Restore your work-in-progress</li>
                                        </ul>
                                        <p class="text-gray-600 dark:text-gray-400 mb-4">
                                            <strong class="text-gray-900 dark:text-white">Git worktrees solve this problem.</strong> They let you check out multiple branches simultaneously, each in its own separate directory. Think of it as having multiple copies of your project, each on a different branch, but all sharing the same Git database.
                                        </p>
                                        <div class="bg-gray-100 dark:bg-black/30 rounded-lg p-4 font-mono text-sm text-gray-800 dark:text-gray-300 mb-4">
                                            <span class="text-gray-600 dark:text-gray-500"># Your repository structure with Lanes</span><br>
                                            my-project/<br>
                                            ├── .git/                <span class="text-gray-600 dark:text-gray-500"># Shared git database (history, commits, refs)</span><br>
                                            ├── src/                 <span class="text-gray-600 dark:text-gray-500"># Your main working directory</span><br>
                                            ├── package.json<br>
                                            └── .worktrees/          <span class="text-gray-600 dark:text-gray-500"># Lanes stores worktrees here</span><br>
                                            &nbsp;&nbsp;&nbsp;&nbsp;├── fix-login-bug/   <span class="text-gray-600 dark:text-gray-500"># Claude working on bug fix</span><br>
                                            &nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;├── src/<br>
                                            &nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;└── package.json<br>
                                            &nbsp;&nbsp;&nbsp;&nbsp;└── add-dark-mode/   <span class="text-gray-600 dark:text-gray-500"># Claude working on new feature</span><br>
                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;├── src/<br>
                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;└── package.json
                                        </div>
                                        <div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4">
                                            <div class="flex gap-2">
                                                <svg class="w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                                <div>
                                                    <p class="text-sm text-blue-800 dark:text-blue-300 font-medium">Key Insight</p>
                                                    <p class="text-sm text-blue-700 dark:text-blue-400 mt-1">
                                                        Each worktree is a complete working directory with its own files, but they all share the same <code class="text-xs bg-blue-100 dark:bg-blue-800 px-1 rounded">.git</code> database. This means commits made in one worktree are immediately visible in all others, but the working files remain isolated.
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- How Lanes Uses Worktrees -->
                                    <div>
                                        <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-3">How Lanes Uses Worktrees</h3>
                                        <p class="text-gray-600 dark:text-gray-400 mb-4">
                                            When you create a new Lanes session, here's what happens under the hood:
                                        </p>
                                        <div class="space-y-3 mb-4">
                                            <div class="flex gap-3 items-start">
                                                <div class="w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center text-sm font-bold flex-shrink-0 mt-0.5">1</div>
                                                <div>
                                                    <p class="text-gray-900 dark:text-white font-medium">Creates a new branch</p>
                                                    <p class="text-sm text-gray-600 dark:text-gray-400">Named after your session (e.g., <code class="text-xs bg-gray-200 dark:bg-black/30 px-1 rounded">fix-login-bug</code>), branched from your source branch</p>
                                                </div>
                                            </div>
                                            <div class="flex gap-3 items-start">
                                                <div class="w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center text-sm font-bold flex-shrink-0 mt-0.5">2</div>
                                                <div>
                                                    <p class="text-gray-900 dark:text-white font-medium">Creates a worktree directory</p>
                                                    <p class="text-sm text-gray-600 dark:text-gray-400">Located at <code class="text-xs bg-gray-200 dark:bg-black/30 px-1 rounded">.worktrees/fix-login-bug/</code> with a full checkout of your project</p>
                                                </div>
                                            </div>
                                            <div class="flex gap-3 items-start">
                                                <div class="w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center text-sm font-bold flex-shrink-0 mt-0.5">3</div>
                                                <div>
                                                    <p class="text-gray-900 dark:text-white font-medium">Launches Claude Code</p>
                                                    <p class="text-sm text-gray-600 dark:text-gray-400">Claude works exclusively in the worktree directory, completely isolated from your main workspace</p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="bg-gray-100 dark:bg-black/30 rounded-lg p-4 font-mono text-sm text-gray-800 dark:text-gray-300">
                                            <span class="text-gray-600 dark:text-gray-500"># Git command that Lanes runs (simplified):</span><br>
                                            git worktree add .worktrees/fix-login-bug -b fix-login-bug
                                        </div>
                                    </div>

                                    <!-- Benefits of Isolation -->
                                    <div>
                                        <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-3">Benefits of Complete Isolation</h3>
                                        <div class="grid md:grid-cols-2 gap-4">
                                            <div class="bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 border border-green-200 dark:border-green-800 rounded-lg p-4">
                                                <div class="flex items-center gap-2 mb-2">
                                                    <svg class="w-5 h-5 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                                    <h4 class="font-bold text-gray-900 dark:text-white">No File Conflicts</h4>
                                                </div>
                                                <p class="text-sm text-gray-700 dark:text-gray-300">
                                                    Changes in one session never affect files in another. You can run multiple Claude sessions simultaneously without any interference.
                                                </p>
                                            </div>
                                            <div class="bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4">
                                                <div class="flex items-center gap-2 mb-2">
                                                    <svg class="w-5 h-5 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                                                    <h4 class="font-bold text-gray-900 dark:text-white">Clean Starting State</h4>
                                                </div>
                                                <p class="text-sm text-gray-700 dark:text-gray-300">
                                                    Each session starts fresh from your source branch. No leftover files or uncommitted changes from previous work.
                                                </p>
                                            </div>
                                            <div class="bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 border border-purple-200 dark:border-purple-800 rounded-lg p-4">
                                                <div class="flex items-center gap-2 mb-2">
                                                    <svg class="w-5 h-5 text-purple-600 dark:text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                                    <h4 class="font-bold text-gray-900 dark:text-white">No Context Switching</h4>
                                                </div>
                                                <p class="text-sm text-gray-700 dark:text-gray-300">
                                                    Say goodbye to <code class="text-xs bg-purple-100 dark:bg-purple-800 px-1 rounded">git stash</code>. Your main workspace stays exactly as you left it while Claude works elsewhere.
                                                </p>
                                            </div>
                                            <div class="bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20 border border-orange-200 dark:border-orange-800 rounded-lg p-4">
                                                <div class="flex items-center gap-2 mb-2">
                                                    <svg class="w-5 h-5 text-orange-600 dark:text-orange-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path></svg>
                                                    <h4 class="font-bold text-gray-900 dark:text-white">Parallel Workflows</h4>
                                                </div>
                                                <p class="text-sm text-gray-700 dark:text-gray-300">
                                                    Run multiple agents on different tasks at the same time. One fixing bugs, another implementing features.
                                                </p>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </section>

                        <!-- Section 3: Permission Modes -->
                        <section id="permission-modes" class="doc-section mb-16 scroll-mt-24 hidden">
                            <div class="bg-white dark:bg-vscode-sidebar rounded-xl border border-gray-200 dark:border-white/10 p-8">
                                <div class="flex items-center gap-4 mb-6">
                                    <div class="w-12 h-12 rounded-lg bg-vscode-accent/10 flex items-center justify-center">
                                        <svg class="w-6 h-6 text-vscode-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg>
                                    </div>
                                    <h2 class="text-3xl font-bold text-gray-900 dark:text-white">Permission Modes</h2>
                                </div>

                                <div class="mb-8">
                                    <p class="text-gray-600 dark:text-gray-400 mb-4">
                                        Permission modes control how Claude Code interacts with your files and executes commands. Each mode offers a different balance between automation and control, allowing you to choose the level of oversight that matches your workflow and security requirements.
                                    </p>
                                    <p class="text-gray-600 dark:text-gray-400">
                                        When creating a new session, you can select the permission mode from the dropdown in the session form. The mode you choose will apply to Claude's entire session in that worktree.
                                    </p>
                                </div>

                                <!-- Quick Comparison Table -->
                                <div class="mb-8 overflow-x-auto">
                                    <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-4">Quick Comparison</h3>
                                    <table class="w-full text-sm border-collapse">
                                        <thead>
                                            <tr class="bg-gray-100 dark:bg-black/30">
                                                <th class="text-left p-3 font-semibold text-gray-900 dark:text-white border-b border-gray-300 dark:border-gray-700">Mode</th>
                                                <th class="text-left p-3 font-semibold text-gray-900 dark:text-white border-b border-gray-300 dark:border-gray-700">File Edits</th>
                                                <th class="text-left p-3 font-semibold text-gray-900 dark:text-white border-b border-gray-300 dark:border-gray-700">Commands</th>
                                                <th class="text-left p-3 font-semibold text-gray-900 dark:text-white border-b border-gray-300 dark:border-gray-700">Best For</th>
                                            </tr>
                                        </thead>
                                        <tbody class="text-gray-600 dark:text-gray-400">
                                            <tr class="border-b border-gray-200 dark:border-gray-800">
                                                <td class="p-3 font-medium text-gray-900 dark:text-white">default</td>
                                                <td class="p-3">Ask first</td>
                                                <td class="p-3">Ask first</td>
                                                <td class="p-3">Standard interactive workflow</td>
                                            </tr>
                                            <tr class="border-b border-gray-200 dark:border-gray-800">
                                                <td class="p-3 font-medium text-gray-900 dark:text-white">acceptEdits</td>
                                                <td class="p-3">Auto-approve</td>
                                                <td class="p-3">Ask first</td>
                                                <td class="p-3">Fast coding, careful with commands</td>
                                            </tr>
                                            <tr class="border-b border-gray-200 dark:border-gray-800">
                                                <td class="p-3 font-medium text-gray-900 dark:text-white">plan</td>
                                                <td class="p-3">Propose only</td>
                                                <td class="p-3">Propose only</td>
                                                <td class="p-3">Learning, sensitive codebases</td>
                                            </tr>
                                            <tr class="border-b border-gray-200 dark:border-gray-800">
                                                <td class="p-3 font-medium text-gray-900 dark:text-white">dontAsk</td>
                                                <td class="p-3">Auto-approve</td>
                                                <td class="p-3">Auto-approve all</td>
                                                <td class="p-3">Fully automated workflows</td>
                                            </tr>
                                            <tr>
                                                <td class="p-3 font-medium text-red-600 dark:text-red-400">bypassPermissions</td>
                                                <td class="p-3">No checks</td>
                                                <td class="p-3">No checks</td>
                                                <td class="p-3">Testing/debugging only</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                                <!-- How to Select -->
                                <div class="mt-8 bg-gray-100 dark:bg-black/30 rounded-lg p-6">
                                    <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-4">How to Select a Permission Mode</h3>
                                    <div class="space-y-4">
                                        <div>
                                            <h4 class="font-semibold text-gray-900 dark:text-white mb-2">When Creating a Session</h4>
                                            <ol class="list-decimal list-inside text-gray-600 dark:text-gray-400 space-y-2 ml-4">
                                                <li>Open the Lanes sidebar in VS Code</li>
                                                <li>Fill out the session form with your session name and prompt</li>
                                                <li>Select your desired permission mode from the "Permission Mode" dropdown</li>
                                                <li>Click "Create Session"</li>
                                            </ol>
                                        </div>
                                        <div>
                                            <p class="text-sm text-gray-600 dark:text-gray-400">
                                                The permission mode is set when the session is created and applies to Claude's entire session in that worktree. Choose carefully based on your task and trust level.
                                            </p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Security Recommendations -->
                                <div class="mt-8 bg-blue-50 dark:bg-blue-950/30 rounded-lg p-6 border border-blue-200 dark:border-blue-900">
                                    <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2">
                                        <svg class="w-6 h-6 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
                                        </svg>
                                        Security Best Practices
                                    </h3>
                                    <ul class="space-y-3 text-gray-700 dark:text-gray-300">
                                        <li class="flex items-start gap-2">
                                            <svg class="w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                            </svg>
                                            <span><strong>Start conservative:</strong> Use <code class="text-sm bg-gray-200 dark:bg-black/30 px-1 rounded">default</code> or <code class="text-sm bg-gray-200 dark:bg-black/30 px-1 rounded">plan</code> when first learning or working with new code</span>
                                        </li>
                                        <li class="flex items-start gap-2">
                                            <svg class="w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                            </svg>
                                            <span><strong>Leverage Lanes's isolation:</strong> More permissive modes like <code class="text-sm bg-gray-200 dark:bg-black/30 px-1 rounded">dontAsk</code> are safer when each session has its own isolated worktree</span>
                                        </li>
                                        <li class="flex items-start gap-2">
                                            <svg class="w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                            </svg>
                                            <span><strong>Match mode to task:</strong> Quick refactoring? Use <code class="text-sm bg-gray-200 dark:bg-black/30 px-1 rounded">acceptEdits</code>. Complex workflow? Use <code class="text-sm bg-gray-200 dark:bg-black/30 px-1 rounded">delegate</code>. Learning? Use <code class="text-sm bg-gray-200 dark:bg-black/30 px-1 rounded">plan</code></span>
                                        </li>
                                        <li class="flex items-start gap-2">
                                            <svg class="w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
                                            </svg>
                                            <span><strong>Use bypassPermissions with Caution:</strong> This mode disables all safety checks and should only be used when in a controlled environment.</span>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </section>

                        <!-- Section 4: Reviewing Changes -->
                        <section id="git-review" class="doc-section mb-16 scroll-mt-24 hidden">
                            <div class="bg-white dark:bg-vscode-sidebar rounded-xl border border-gray-200 dark:border-white/10 p-8">
                                <div class="flex items-center gap-4 mb-6">
                                    <div class="w-12 h-12 rounded-lg bg-vscode-accent/10 flex items-center justify-center">
                                        <svg class="w-6 h-6 text-vscode-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                                    </div>
                                    <h2 class="text-3xl font-bold text-gray-900 dark:text-white">Reviewing Changes</h2>
                                </div>
                                <p class="text-gray-600 dark:text-gray-400 mb-6">
                                    Lanes includes a built-in code review tool that lets you view changes, add comments, and generate review feedback for your coding agents.
                                </p>

                                <div class="space-y-8">
                                    <!-- Opening the Diff Viewer -->
                                    <div>
                                        <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">Opening the Git Changes Viewer</h3>
                                        <p class="text-gray-600 dark:text-gray-400 mb-4">
                                            To review changes made in a session:
                                        </p>
                                        <ol class="space-y-3 mb-4">
                                            <li class="flex gap-3">
                                                <span class="flex-shrink-0 w-7 h-7 bg-vscode-accent text-white rounded-full flex items-center justify-center font-bold text-sm">1</span>
                                                <div class="flex-1">
                                                    <p class="text-gray-700 dark:text-gray-300">Click the <strong class="text-gray-900 dark:text-white">"Show Git Changes"</strong> button in the session's action bar (the diff icon)</p>
                                                </div>
                                            </li>
                                            <li class="flex gap-3">
                                                <span class="flex-shrink-0 w-7 h-7 bg-vscode-accent text-white rounded-full flex items-center justify-center font-bold text-sm">2</span>
                                                <div class="flex-1">
                                                    <p class="text-gray-700 dark:text-gray-300">A new panel opens showing all file changes between your session branch and the comparison branch</p>
                                                </div>
                                            </li>
                                        </ol>
                                        <div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4">
                                            <div class="flex gap-2">
                                                <svg class="w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                                <div>
                                                    <p class="text-sm text-blue-800 dark:text-blue-300 font-medium">Tip</p>
                                                    <p class="text-sm text-blue-700 dark:text-blue-400 mt-1">
                                                        You can also access this via the command palette: <kbd class="text-xs bg-blue-100 dark:bg-blue-800 px-1 rounded">Cmd+Shift+P</kbd> → "Lanes: Show Git Changes"
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Understanding the Diff View -->
                                    <div>
                                        <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">Understanding the Diff View</h3>
                                        <p class="text-gray-600 dark:text-gray-400 mb-4">
                                            The diff viewer shows changes in a unified diff format:
                                        </p>
                                        <div class="space-y-4">
                                            <div class="bg-gray-100 dark:bg-black/30 rounded-lg p-4">
                                                <h4 class="font-bold text-gray-900 dark:text-white mb-2">Comparison Branch</h4>
                                                <p class="text-sm text-gray-600 dark:text-gray-400">
                                                    By default, changes are compared against <code class="text-xs bg-gray-200 dark:bg-black/40 px-1 rounded">main</code> or <code class="text-xs bg-gray-200 dark:bg-black/40 px-1 rounded">master</code>.
                                                    You can change this using the branch selector dropdown at the top of the diff panel.
                                                </p>
                                            </div>
                                            <div class="grid md:grid-cols-2 gap-4">
                                                <div class="bg-green-50 dark:bg-green-900/20 border-l-4 border-green-500 p-4">
                                                    <h5 class="font-bold text-gray-900 dark:text-white mb-2 flex items-center gap-2">
                                                        <span class="text-green-600 dark:text-green-400">+</span> Added Lines
                                                    </h5>
                                                    <p class="text-sm text-gray-600 dark:text-gray-400">
                                                        Lines highlighted in green are new additions to the codebase.
                                                    </p>
                                                </div>
                                                <div class="bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 p-4">
                                                    <h5 class="font-bold text-gray-900 dark:text-white mb-2 flex items-center gap-2">
                                                        <span class="text-red-600 dark:text-red-400">-</span> Removed Lines
                                                    </h5>
                                                    <p class="text-sm text-gray-600 dark:text-gray-400">
                                                        Lines highlighted in red have been deleted from the original.
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Adding Review Comments -->
                                    <div>
                                        <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">Adding Review Comments</h3>
                                        <p class="text-gray-600 dark:text-gray-400 mb-4">
                                            You can add comments to specific lines in the diff to provide feedback:
                                        </p>
                                        <ol class="space-y-3 mb-4">
                                            <li class="flex gap-3">
                                                <span class="flex-shrink-0 w-7 h-7 bg-vscode-accent text-white rounded-full flex items-center justify-center font-bold text-sm">1</span>
                                                <div class="flex-1">
                                                    <p class="text-gray-700 dark:text-gray-300"><strong class="text-gray-900 dark:text-white">Click on any line</strong> in the diff view to select it</p>
                                                </div>
                                            </li>
                                            <li class="flex gap-3">
                                                <span class="flex-shrink-0 w-7 h-7 bg-vscode-accent text-white rounded-full flex items-center justify-center font-bold text-sm">2</span>
                                                <div class="flex-1">
                                                    <p class="text-gray-700 dark:text-gray-300"><strong class="text-gray-900 dark:text-white">Type your comment</strong> in the input field that appears</p>
                                                </div>
                                            </li>
                                            <li class="flex gap-3">
                                                <span class="flex-shrink-0 w-7 h-7 bg-vscode-accent text-white rounded-full flex items-center justify-center font-bold text-sm">3</span>
                                                <div class="flex-1">
                                                    <p class="text-gray-700 dark:text-gray-300"><strong class="text-gray-900 dark:text-white">Press Enter</strong> to save the comment</p>
                                                </div>
                                            </li>
                                        </ol>
                                        <p class="text-gray-600 dark:text-gray-400 mb-4">
                                            Comments are displayed inline with the code, making it easy to track your feedback as you review.
                                        </p>
                                        <div class="bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4">
                                            <p class="text-sm text-yellow-800 dark:text-yellow-300">
                                                <strong>Note:</strong> Comments are stored locally in the diff viewer session. They are not persisted to git or any external system.
                                            </p>
                                        </div>
                                    </div>

                                    <!-- Submitting Review -->
                                    <div>
                                        <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">Submitting Your Review</h3>
                                        <p class="text-gray-600 dark:text-gray-400 mb-4">
                                            Once you've added all your comments, you can generate a formatted review to share with your coding agent:
                                        </p>
                                        <ol class="space-y-3 mb-6">
                                            <li class="flex gap-3">
                                                <span class="flex-shrink-0 w-7 h-7 bg-vscode-accent text-white rounded-full flex items-center justify-center font-bold text-sm">1</span>
                                                <div class="flex-1">
                                                    <p class="text-gray-700 dark:text-gray-300">Click the <strong class="text-gray-900 dark:text-white">"Submit Review"</strong> button at the top of the diff panel</p>
                                                </div>
                                            </li>
                                            <li class="flex gap-3">
                                                <span class="flex-shrink-0 w-7 h-7 bg-vscode-accent text-white rounded-full flex items-center justify-center font-bold text-sm">2</span>
                                                <div class="flex-1">
                                                    <p class="text-gray-700 dark:text-gray-300">The review is <strong class="text-gray-900 dark:text-white">automatically copied to your clipboard</strong> in a structured markdown format</p>
                                                </div>
                                            </li>
                                            <li class="flex gap-3">
                                                <span class="flex-shrink-0 w-7 h-7 bg-vscode-accent text-white rounded-full flex items-center justify-center font-bold text-sm">3</span>
                                                <div class="flex-1">
                                                    <p class="text-gray-700 dark:text-gray-300"><strong class="text-gray-900 dark:text-white">Paste</strong> the review into your coding agent's terminal or chat</p>
                                                </div>
                                            </li>
                                        </ol>

                                        <h4 class="text-lg font-semibold text-gray-900 dark:text-white mb-3">Clipboard Format</h4>
                                        <p class="text-gray-600 dark:text-gray-400 mb-4">
                                            The generated review follows a structured markdown format that's easy for AI agents to parse:
                                        </p>
                                        <div class="bg-gray-100 dark:bg-black/30 rounded-lg overflow-hidden">
                                            <div class="flex items-center gap-2 px-4 py-2 border-b border-gray-200 dark:border-white/10 bg-gray-200 dark:bg-black/40">
                                                <span class="text-xs text-gray-600 dark:text-gray-500 font-mono">Example: Clipboard Output</span>
                                            </div>
                                            <pre class="p-4 text-sm font-mono text-gray-700 dark:text-gray-300 overflow-x-auto"><code><span class="text-purple-600 dark:text-purple-400"># Code Review Comments</span>

<span class="text-blue-600 dark:text-blue-400">## docs/docs.html</span>

<span class="text-gray-600 dark:text-gray-400">**Line 38** (added):</span>
```
+    &lt;/script&gt;
```
<span class="text-green-600 dark:text-green-400">&gt; Is this really a script tag? It seems misplaced.</span>

<span class="text-gray-600 dark:text-gray-400">**Line 142** (added):</span>
```
+    const user = await getUser();
```
<span class="text-green-600 dark:text-green-400">&gt; Consider adding error handling for the getUser() call.</span>

<span class="text-blue-600 dark:text-blue-400">## src/utils/helper.ts</span>

<span class="text-gray-600 dark:text-gray-400">**Line 25** (removed):</span>
```
-    // TODO: Remove this hack
```
<span class="text-green-600 dark:text-green-400">&gt; Good cleanup! But make sure the hack was actually fixed, not just the comment removed.</span></code></pre>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </section>

                        <!-- Section 5: Introduction to Workflows -->
                        <section id="workflows-intro" class="doc-section mb-16 scroll-mt-24 hidden">
                            <div class="bg-white dark:bg-vscode-sidebar rounded-xl border border-gray-200 dark:border-white/10 p-8">
                                <div class="flex items-center gap-4 mb-6">
                                    <div class="w-12 h-12 rounded-lg bg-vscode-accent/10 flex items-center justify-center">
                                        <svg class="w-6 h-6 text-vscode-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                                    </div>
                                    <h2 class="text-3xl font-bold text-gray-900 dark:text-white">Introduction to Workflows</h2>
                                </div>

                                <p class="text-gray-600 dark:text-gray-400 mb-8 text-lg">
                                    Workflows are structured development processes that guide Claude through proven phases like planning, implementation, testing, and review. Built on research from <a href="https://www.anthropic.com/engineering/effective-harnesses-for-long-running-agents" class="text-vscode-accent hover:underline">Anthropic's long-running agent harnesses</a>, they bring consistency and quality to complex development tasks.
                                </p>

                                <div class="space-y-8">
                                    <!-- What are Workflows? -->
                                    <div>
                                        <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-4">What are Workflows?</h3>
                                        <p class="text-gray-600 dark:text-gray-400 mb-4">
                                            A workflow is like a development playbook that Claude follows step-by-step. Each workflow defines:
                                        </p>
                                        <div class="grid md:grid-cols-2 gap-4">
                                            <div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4">
                                                <h4 class="font-bold text-gray-900 dark:text-white mb-2 flex items-center gap-2">
                                                    <svg class="w-5 h-5 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path>
                                                    </svg>
                                                    Phases
                                                </h4>
                                                <p class="text-sm text-gray-600 dark:text-gray-400">
                                                    The sequence of steps (plan, implement, test, review) that ensure thorough development
                                                </p>
                                            </div>
                                            <div class="bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-lg p-4">
                                                <h4 class="font-bold text-gray-900 dark:text-white mb-2 flex items-center gap-2">
                                                    <svg class="w-5 h-5 text-purple-600 dark:text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                                                    </svg>
                                                    Specialized Agents
                                                </h4>
                                                <p class="text-sm text-gray-600 dark:text-gray-400">
                                                    Different "roles" for Claude with specific tools and restrictions (orchestrator, implementer, tester, reviewer)
                                                </p>
                                            </div>
                                            <div class="bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4">
                                                <h4 class="font-bold text-gray-900 dark:text-white mb-2 flex items-center gap-2">
                                                    <svg class="w-5 h-5 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                                                    </svg>
                                                    Repeatable Loops
                                                </h4>
                                                <p class="text-sm text-gray-600 dark:text-gray-400">
                                                    Patterns that repeat for each task (implement → test → review → resolve)
                                                </p>
                                            </div>
                                            <div class="bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg p-4">
                                                <h4 class="font-bold text-gray-900 dark:text-white mb-2 flex items-center gap-2">
                                                    <svg class="w-5 h-5 text-orange-600 dark:text-orange-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                                    </svg>
                                                    Progress Tracking
                                                </h4>
                                                <p class="text-sm text-gray-600 dark:text-gray-400">
                                                    Automatic state persistence so Claude can resume work across context windows
                                                </p>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Why Use Workflows? -->
                                    <div>
                                        <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-4">Why Use Workflows?</h3>
                                        <div class="space-y-4">
                                            <div class="flex items-start gap-3">
                                                <div class="w-8 h-8 bg-blue-500/20 rounded-lg flex items-center justify-center flex-shrink-0 mt-0.5">
                                                    <svg class="w-5 h-5 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path>
                                                    </svg>
                                                </div>
                                                <div>
                                                    <h4 class="font-bold text-gray-900 dark:text-white mb-1">Consistent Structure</h4>
                                                    <p class="text-sm text-gray-600 dark:text-gray-400">
                                                        Every task follows the same proven pattern: plan before coding, test after implementation, review before completion. This prevents common mistakes like coding without a plan or skipping tests.
                                                    </p>
                                                </div>
                                            </div>
                                            <div class="flex items-start gap-3">
                                                <div class="w-8 h-8 bg-purple-500/20 rounded-lg flex items-center justify-center flex-shrink-0 mt-0.5">
                                                    <svg class="w-5 h-5 text-purple-600 dark:text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
                                                    </svg>
                                                </div>
                                                <div>
                                                    <h4 class="font-bold text-gray-900 dark:text-white mb-1">Higher Quality</h4>
                                                    <p class="text-sm text-gray-600 dark:text-gray-400">
                                                        Specialized agents bring focused expertise to each phase. The reviewer agent only reads code (can't edit), ensuring objective feedback. The tester focuses solely on test quality.
                                                    </p>
                                                </div>
                                            </div>
                                            <div class="flex items-start gap-3">
                                                <div class="w-8 h-8 bg-green-500/20 rounded-lg flex items-center justify-center flex-shrink-0 mt-0.5">
                                                    <svg class="w-5 h-5 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                                                    </svg>
                                                </div>
                                                <div>
                                                    <h4 class="font-bold text-gray-900 dark:text-white mb-1">Built-in Checkpoints</h4>
                                                    <p class="text-sm text-gray-600 dark:text-gray-400">
                                                        Workflows prevent Claude from jumping ahead or getting sidetracked. Each phase must complete before moving to the next, ensuring nothing is skipped.
                                                    </p>
                                                </div>
                                            </div>
                                            <div class="flex items-start gap-3">
                                                <div class="w-8 h-8 bg-orange-500/20 rounded-lg flex items-center justify-center flex-shrink-0 mt-0.5">
                                                    <svg class="w-5 h-5 text-orange-600 dark:text-orange-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                                    </svg>
                                                </div>
                                                <div>
                                                    <h4 class="font-bold text-gray-900 dark:text-white mb-1">Seamless Context Continuity</h4>
                                                    <p class="text-sm text-gray-600 dark:text-gray-400">
                                                        Workflow state is saved to <code class="text-xs bg-gray-200 dark:bg-black/30 px-1 rounded">workflow-state.json</code> after each step. If Claude runs out of context or the session ends, you can resume exactly where you left off.
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                                                        <!-- Built-in Workflow Types -->
                                                                        <div>
                                                                            <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-4">Built-in Workflow Types</h3>
                                                                            <p class="text-gray-600 dark:text-gray-400 mb-4">
                                                                                Lanes includes four workflow templates out of the box. Each is optimized for a specific type of development work:
                                                                            </p>
                                                                            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3">
                                                                                <div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4">
                                                                                    <div class="w-10 h-10 bg-blue-500/20 rounded-lg flex items-center justify-center mb-3">
                                                                                        <span class="text-blue-600 dark:text-blue-400 font-bold text-sm">FT</span>
                                                                                    </div>
                                                                                    <h4 class="font-bold text-gray-900 dark:text-white mb-2 text-sm">Feature Dev</h4>
                                                                                    <p class="text-xs text-gray-600 dark:text-gray-400">
                                                                                        New features with tests and review.
                                                                                    </p>
                                                                                </div>
                                                                                <div class="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4">
                                                                                    <div class="w-10 h-10 bg-red-500/20 rounded-lg flex items-center justify-center mb-3">
                                                                                        <span class="text-red-600 dark:text-red-400 font-bold text-sm">BF</span>
                                                                                    </div>
                                                                                    <h4 class="font-bold text-gray-900 dark:text-white mb-2 text-sm">Bug Fix</h4>
                                                                                    <p class="text-xs text-gray-600 dark:text-gray-400">
                                                                                        Investigate and fix bugs safely.
                                                                                    </p>
                                                                                </div>
                                                                                <div class="bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-lg p-4">
                                                                                    <div class="w-10 h-10 bg-purple-500/20 rounded-lg flex items-center justify-center mb-3">
                                                                                        <span class="text-purple-600 dark:text-purple-400 font-bold text-sm">RF</span>
                                                                                    </div>
                                                                                    <h4 class="font-bold text-gray-900 dark:text-white mb-2 text-sm">Refactor</h4>
                                                                                    <p class="text-xs text-gray-600 dark:text-gray-400">
                                                                                        Improve code quality safely.
                                                                                    </p>
                                                                                </div>
                                                                                <div class="bg-gray-50 dark:bg-gray-900/20 border border-gray-200 dark:border-gray-800 rounded-lg p-4">
                                                                                    <div class="w-10 h-10 bg-gray-500/20 rounded-lg flex items-center justify-center mb-3">
                                                                                        <span class="text-gray-600 dark:text-gray-400 font-bold text-sm">DF</span>
                                                                                    </div>
                                                                                    <h4 class="font-bold text-gray-900 dark:text-white mb-2 text-sm">Default</h4>
                                                                                    <p class="text-xs text-gray-600 dark:text-gray-400">
                                                                                        General-purpose tasks.
                                                                                    </p>
                                                                                </div>
                                                                                <div class="bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4">
                                                                                    <div class="w-10 h-10 bg-green-500/20 rounded-lg flex items-center justify-center mb-3">
                                                                                        <span class="text-green-600 dark:text-green-400 font-bold text-sm">CW</span>
                                                                                    </div>
                                                                                    <h4 class="font-bold text-gray-900 dark:text-white mb-2 text-sm">Custom</h4>
                                                                                    <p class="text-xs text-gray-600 dark:text-gray-400">
                                                                                        Your own workflows.
                                                                                    </p>
                                                                                </div>
                                                                            </div>
                                                                        </div>


                                    <!-- Starting a Workflow -->
                                    <div>
                                        <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-4">How to Start a Workflow Session</h3>
                                        <div class="bg-gray-50 dark:bg-black/30 rounded-lg p-6 border border-gray-200 dark:border-white/10">
                                            <div class="space-y-4">
                                                <div class="flex items-start gap-3">
                                                    <div class="flex-shrink-0 w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center font-bold text-xs">1</div>
                                                    <div>
                                                        <p class="text-gray-700 dark:text-gray-300">
                                                            <strong>Click "New Session"</strong> in the Lanes sidebar
                                                        </p>
                                                    </div>
                                                </div>
                                                <div class="flex items-start gap-3">
                                                    <div class="flex-shrink-0 w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center font-bold text-xs">3</div>
                                                    <div>
                                                        <p class="text-gray-700 dark:text-gray-300">
                                                            <strong>Enter a branch name</strong> (e.g., "feat-user-auth" or "fix-login-bug")
                                                        </p>
                                                    </div>
                                                </div>
                                                <div class="flex items-start gap-3">
                                                    <div class="flex-shrink-0 w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center font-bold text-xs">4</div>
                                                    <div>
                                                        <p class="text-gray-700 dark:text-gray-300">
                                                            <strong>Describe your goal</strong> to Claude (e.g., "Add user authentication with email and password")
                                                        </p>
                                                    </div>
                                                </div>
                                                <div class="flex items-start gap-3">
                                                    <div class="flex-shrink-0 w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center font-bold text-xs">2</div>
                                                    <div>
                                                        <p class="text-gray-700 dark:text-gray-300">
                                                            <strong>Choose a workflow type</strong> from the dropdown (If you have not created a custom workflow you will need to. You can learn how in the Creating Workflows section.)
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="mt-4 pt-4 border-t border-gray-200 dark:border-gray-600">
                                                <p class="text-sm text-gray-600 dark:text-gray-400">
                                                    Claude will automatically follow the workflow phases, creating a <code class="text-xs bg-gray-200 dark:bg-black/30 px-1 rounded">workflow-state.json</code> file to track progress and saving workflow state after each step.
                                                </p>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- When to Use Workflows -->
                                    <div>
                                        <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-4">When to Use Workflows vs. Ad-Hoc Sessions</h3>
                                        <div class="grid md:grid-cols-2 gap-4">
                                            <div class="bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-5">
                                                <h4 class="font-bold text-gray-900 dark:text-white mb-3 flex items-center gap-2">
                                                    <svg class="w-5 h-5 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                                    </svg>
                                                    Use Workflows For:
                                                </h4>
                                                <ul class="space-y-2 text-sm text-gray-700 dark:text-gray-300">
                                                    <li class="flex items-start gap-2">
                                                        <span class="text-green-600 dark:text-green-400 mt-0.5">•</span>
                                                        <span>New features with multiple components</span>
                                                    </li>
                                                    <li class="flex items-start gap-2">
                                                        <span class="text-green-600 dark:text-green-400 mt-0.5">•</span>
                                                        <span>Complex bug fixes requiring investigation</span>
                                                    </li>
                                                    <li class="flex items-start gap-2">
                                                        <span class="text-green-600 dark:text-green-400 mt-0.5">•</span>
                                                        <span>Large refactors touching multiple files</span>
                                                    </li>
                                                    <li class="flex items-start gap-2">
                                                        <span class="text-green-600 dark:text-green-400 mt-0.5">•</span>
                                                        <span>Work that needs thorough testing and review</span>
                                                    </li>
                                                    <li class="flex items-start gap-2">
                                                        <span class="text-green-600 dark:text-green-400 mt-0.5">•</span>
                                                        <span>Tasks that may span multiple sessions</span>
                                                    </li>
                                                    <li class="flex items-start gap-2">
                                                        <span class="text-green-600 dark:text-green-400 mt-0.5">•</span>
                                                        <span>Team projects needing consistent process</span>
                                                    </li>
                                                </ul>
                                            </div>
                                            <div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-5">
                                                <h4 class="font-bold text-gray-900 dark:text-white mb-3 flex items-center gap-2">
                                                    <svg class="w-5 h-5 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                                                    </svg>
                                                    Use Ad-Hoc Sessions For:
                                                </h4>
                                                <ul class="space-y-2 text-sm text-gray-700 dark:text-gray-300">
                                                    <li class="flex items-start gap-2">
                                                        <span class="text-blue-600 dark:text-blue-400 mt-0.5">•</span>
                                                        <span>Quick fixes (typos, small tweaks)</span>
                                                    </li>
                                                    <li class="flex items-start gap-2">
                                                        <span class="text-blue-600 dark:text-blue-400 mt-0.5">•</span>
                                                        <span>Exploratory coding or prototyping</span>
                                                    </li>
                                                    <li class="flex items-start gap-2">
                                                        <span class="text-blue-600 dark:text-blue-400 mt-0.5">•</span>
                                                        <span>One-off scripts or utilities</span>
                                                    </li>
                                                    <li class="flex items-start gap-2">
                                                        <span class="text-blue-600 dark:text-blue-400 mt-0.5">•</span>
                                                        <span>Documentation updates</span>
                                                    </li>
                                                    <li class="flex items-start gap-2">
                                                        <span class="text-blue-600 dark:text-blue-400 mt-0.5">•</span>
                                                        <span>Code review or analysis (no changes)</span>
                                                    </li>
                                                    <li class="flex items-start gap-2">
                                                        <span class="text-blue-600 dark:text-blue-400 mt-0.5">•</span>
                                                        <span>When you want full manual control</span>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                        <div class="mt-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4">
                                            <p class="text-sm text-gray-700 dark:text-gray-300">
                                                <strong class="text-yellow-800 dark:text-yellow-300">Tip:</strong> Start with a workflow for quality work. You can always switch to ad-hoc if the structure feels unnecessary. Workflows add minimal overhead but provide significant benefits for anything beyond trivial changes.
                                            </p>
                                        </div>
                                    </div>

                                    <!-- Next Steps -->
                                    <div class="bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-6">
                                        <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-3">Want to Learn More?</h3>
                                        <p class="text-gray-700 dark:text-gray-300 mb-4">
                                            This introduction covered the basics of workflows. For deeper understanding:
                                        </p>
                                        <ul class="space-y-2 text-sm text-gray-700 dark:text-gray-300">
                                            <li class="flex items-center gap-2">
                                                <svg class="w-4 h-4 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                                </svg>
                                                <a href="#workflow-templates" class="text-vscode-accent hover:underline">Workflow Templates</a> - Learn YAML syntax and create custom workflows
                                            </li>
                                            <li class="flex items-center gap-2">
                                                <svg class="w-4 h-4 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                                </svg>
                                                <a href="#lanes-mcp" class="text-vscode-accent hover:underline">Lanes MCP</a> - Understand how workflows use Model Context Protocol
                                            </li>
                                            <li class="flex items-center gap-2">
                                                <svg class="w-4 h-4 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                                </svg>
                                                <a href="https://www.anthropic.com/engineering/effective-harnesses-for-long-running-agents" class="text-vscode-accent hover:underline" target="_blank">Anthropic's Research Paper</a> - The science behind workflow harnesses
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </section>

                        <!-- Section 6: Workflow Structure -->
                        <section id="workflow-structure" class="doc-section mb-16 scroll-mt-24 hidden">
                            <div class="bg-white dark:bg-vscode-sidebar rounded-xl border border-gray-200 dark:border-white/10 p-8">
                                <div class="flex items-center gap-4 mb-6">
                                    <div class="w-12 h-12 rounded-lg bg-vscode-accent/10 flex items-center justify-center">
                                        <svg class="w-6 h-6 text-vscode-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"></path></svg>
                                    </div>
                                    <h2 class="text-3xl font-bold text-gray-900 dark:text-white">Workflow Structure</h2>
                                </div>
                                <p class="text-gray-600 dark:text-gray-400 mb-6">
                                    This section covers the YAML structure of workflow templates, including how to define agents, create loops, and configure steps.
                                </p>

                                <div class="space-y-10">
                                    <!-- YAML Structure Overview -->
                                    <div>
                                        <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">YAML Structure Overview</h3>
                                        <p class="text-gray-600 dark:text-gray-400 mb-4">
                                            Workflow templates are YAML files with four top-level sections:
                                        </p>

                                        <div class="space-y-4">
                                            <div class="bg-gray-100 dark:bg-black/30 rounded-lg p-4">
                                                <h4 class="font-bold text-gray-900 dark:text-white mb-2 font-mono text-sm">name</h4>
                                                <p class="text-sm text-gray-600 dark:text-gray-400">
                                                    <strong>Type:</strong> string<br>
                                                    <strong>Required:</strong> Yes<br>
                                                    <strong>Purpose:</strong> Identifies the workflow. Must be unique within your project.
                                                </p>
                                            </div>

                                            <div class="bg-gray-100 dark:bg-black/30 rounded-lg p-4">
                                                <h4 class="font-bold text-gray-900 dark:text-white mb-2 font-mono text-sm">description</h4>
                                                <p class="text-sm text-gray-600 dark:text-gray-400">
                                                    <strong>Type:</strong> string<br>
                                                    <strong>Required:</strong> Yes<br>
                                                    <strong>Purpose:</strong> Human-readable description shown in the workflow selector.
                                                </p>
                                            </div>

                                            <div class="bg-gray-100 dark:bg-black/30 rounded-lg p-4">
                                                <h4 class="font-bold text-gray-900 dark:text-white mb-2 font-mono text-sm">agents</h4>
                                                <p class="text-sm text-gray-600 dark:text-gray-400">
                                                    <strong>Type:</strong> object<br>
                                                    <strong>Required:</strong> Yes<br>
                                                    <strong>Purpose:</strong> Defines specialized agents with tool permissions and restrictions.
                                                </p>
                                            </div>

                                            <div class="bg-gray-100 dark:bg-black/30 rounded-lg p-4">
                                                <h4 class="font-bold text-gray-900 dark:text-white mb-2 font-mono text-sm">loops</h4>
                                                <p class="text-sm text-gray-600 dark:text-gray-400">
                                                    <strong>Type:</strong> object<br>
                                                    <strong>Required:</strong> Yes<br>
                                                    <strong>Purpose:</strong> Reusable sub-workflows that iterate over tasks.
                                                </p>
                                            </div>

                                            <div class="bg-gray-100 dark:bg-black/30 rounded-lg p-4">
                                                <h4 class="font-bold text-gray-900 dark:text-white mb-2 font-mono text-sm">steps</h4>
                                                <p class="text-sm text-gray-600 dark:text-gray-400">
                                                    <strong>Type:</strong> array<br>
                                                    <strong>Required:</strong> Yes (must have at least one step)<br>
                                                    <strong>Purpose:</strong> The main workflow sequence, executed in order.
                                                </p>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Agents Definition -->
                                    <div>
                                        <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">Agents Definition</h3>
                                        <p class="text-gray-600 dark:text-gray-400 mb-4">
                                            Agents are specialized roles that execute workflow steps. Each agent has specific capabilities and restrictions.
                                        </p>

                                        <div class="bg-gray-100 dark:bg-black/30 rounded-lg overflow-hidden mb-4">
                                            <div class="flex items-center gap-2 px-4 py-2 border-b border-gray-200 dark:border-white/10 bg-gray-200 dark:bg-black/40">
                                                <span class="text-xs text-gray-600 dark:text-gray-500 font-mono">Agent Configuration</span>
                                            </div>
                                            <pre class="p-4 text-sm font-mono text-gray-700 dark:text-gray-300 overflow-x-auto"><code><span class="text-purple-400">agents:</span>
  <span class="text-blue-400">orchestrator:</span>
    <span class="text-green-400">description:</span> Plans work and coordinates sub-agents
    <span class="text-green-400">tools:</span>
      - Read
      - Glob
      - Grep
      - Task
    <span class="text-green-400">cannot:</span>
      - Write
      - Edit
      - Bash
      - commit

  <span class="text-blue-400">implementer:</span>
    <span class="text-green-400">description:</span> Writes code to implement features
    <span class="text-green-400">tools:</span>
      - Read
      - Write
      - Edit
      - Bash
      - Glob
      - Grep
    <span class="text-green-400">cannot:</span>
      - commit
      - Task</code></pre>
                                        </div>

                                    </div>

                                    <!-- Steps -->
                                    <div>
                                        <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">Steps (Main Workflow Sequence)</h3>
                                        <p class="text-gray-600 dark:text-gray-400 mb-4">
                                            Steps define the main workflow sequence. They are executed in order from top to bottom.
                                        </p>

                                        <div class="bg-gray-100 dark:bg-black/30 rounded-lg overflow-hidden mb-4">
                                            <div class="flex items-center gap-2 px-4 py-2 border-b border-gray-200 dark:border-white/10 bg-gray-200 dark:bg-black/40">
                                                <span class="text-xs text-gray-600 dark:text-gray-500 font-mono">Main Steps</span>
                                            </div>
                                            <pre class="p-4 text-sm font-mono text-gray-700 dark:text-gray-300 overflow-x-auto"><code><span class="text-purple-400">steps:</span>
  - <span class="text-green-400">id:</span> plan
    <span class="text-green-400">type:</span> action
    <span class="text-green-400">agent:</span> orchestrator
    <span class="text-green-400">instructions:</span> |
      Analyze the goal and break it into discrete tasks.

      Consider:
      1. What are the individual features or changes needed?
      2. What are the dependencies between tasks?
      3. What is the optimal order of implementation?

  - <span class="text-green-400">id:</span> define_tasks
    <span class="text-green-400">type:</span> action
    <span class="text-green-400">agent:</span> orchestrator
    <span class="text-green-400">instructions:</span> |
      Call workflow_set_tasks('feature_development', tasks) with:
      - id: unique identifier
      - title: concise title
      - description: detailed description

  - <span class="text-green-400">id:</span> feature_development
    <span class="text-green-400">type:</span> loop
    <span class="text-gray-500"># References the loop defined above</span>

  - <span class="text-green-400">id:</span> final_review
    <span class="text-green-400">type:</span> action
    <span class="text-green-400">agent:</span> reviewer
    <span class="text-green-400">instructions:</span> |
      Review the implementation as a whole...</code></pre>
                                        </div>

                                        <h4 class="text-lg font-semibold text-gray-900 dark:text-white mb-3">Step Fields</h4>
                                        <div class="space-y-3">
                                            <div class="bg-gray-100 dark:bg-black/30 rounded-lg p-4">
                                                <h5 class="font-bold text-gray-900 dark:text-white mb-1 font-mono text-sm">id</h5>
                                                <p class="text-sm text-gray-600 dark:text-gray-400">
                                                    <strong>Type:</strong> string<br>
                                                    <strong>Required:</strong> Yes<br>
                                                    Unique identifier for this step. For loop steps, must match a loop name.
                                                </p>
                                            </div>

                                            <div class="bg-gray-100 dark:bg-black/30 rounded-lg p-4">
                                                <h5 class="font-bold text-gray-900 dark:text-white mb-1 font-mono text-sm">type</h5>
                                                <p class="text-sm text-gray-600 dark:text-gray-400">
                                                    <strong>Type:</strong> string<br>
                                                    <strong>Required:</strong> Yes<br>
                                                    <strong>Valid values:</strong> action, loop

                                        <div class="grid md:grid-cols-2 gap-4 mb-4">
                                            <div class="bg-green-50 dark:bg-green-900/20 border-l-4 border-green-500 p-4">
                                                <h5 class="font-bold text-gray-900 dark:text-white mb-2 font-mono text-sm">action</h5>
                                                <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">
                                                    A single operation performed by an agent. Used for planning, reviewing, or any one-off task.
                                                </p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400">
                                                    <strong>Required fields:</strong> id, type, instructions<br>
                                                    <strong>Optional fields:</strong> agent
                                                </p>
                                            </div>

                                            <div class="bg-orange-50 dark:bg-orange-900/20 border-l-4 border-orange-500 p-4">
                                                <h5 class="font-bold text-gray-900 dark:text-white mb-2 font-mono text-sm">loop</h5>
                                                <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">
                                                    Iterates over a list of tasks, executing the loop's sub-steps for each task.
                                                </p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400">
                                                    <strong>Required fields:</strong> id, type<br>
                                                    <strong>Note:</strong> The id must match a loop name defined in the <code class="text-xs bg-gray-200 dark:bg-black/30 px-1 rounded">loops:</code> section
                                                </p>
                                            </div>
                                        </div>

                                                </p>
                                            </div>

                                            <div class="bg-gray-100 dark:bg-black/30 rounded-lg p-4">
                                                <h5 class="font-bold text-gray-900 dark:text-white mb-1 font-mono text-sm">agent</h5>
                                                <p class="text-sm text-gray-600 dark:text-gray-400">
                                                    <strong>Type:</strong> string<br>
                                                    <strong>Required:</strong> No (for action steps)<br>
                                                    <strong>Not applicable:</strong> For loop steps (agents are specified in loop sub-steps)<br>
                                                    Name of the agent to execute this step. When omitted, the main Claude agent handles that step directly instead of delegating to a specialized sub-agent.
                                                This is useful for simpler workflows or steps that don't require specialized capabilities.
                                                </p>
                                            </div>

                                            <div class="bg-gray-100 dark:bg-black/30 rounded-lg p-4">
                                                <h5 class="font-bold text-gray-900 dark:text-white mb-1 font-mono text-sm">instructions</h5>
                                                <p class="text-sm text-gray-600 dark:text-gray-400">
                                                    <strong>Type:</strong> string<br>
                                                    <strong>Required:</strong> Yes (for action steps)<br>
                                                    <strong>Not applicable:</strong> For loop steps (instructions are in loop sub-steps)<br>
                                                    Instructions for what to do in this step.
                                                </p>
                                            </div>

                                            <div class="bg-purple-50 dark:bg-purple-900/20 border-l-4 border-purple-500 p-4">
                                                <h5 class="font-bold text-gray-900 dark:text-white mb-1 font-mono text-sm">on_fail</h5>
                                                <p class="text-sm text-gray-600 dark:text-gray-400">
                                                    <strong>Type:</strong> string<br>
                                                    <strong>Required:</strong> No<br>
                                                    <strong>Valid values:</strong> retry, skip, abort<br>
                                                    <strong>Default:</strong> abort<br>
                                                    Action to take if this step fails.
                                                </p>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Loops and Sub-steps -->
                                    <div>
                                        <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">Loops and Sub-steps</h3>
                                        <p class="text-gray-600 dark:text-gray-400 mb-4">
                                            Loops are reusable sub-workflows that execute a sequence of steps for each task in a list.
                                            They enable structured iteration over features, fixes, or refactors.
                                        </p>

                                        <div class="bg-gray-100 dark:bg-black/30 rounded-lg overflow-hidden mb-4">
                                            <div class="flex items-center gap-2 px-4 py-2 border-b border-gray-200 dark:border-white/10 bg-gray-200 dark:bg-black/40">
                                                <span class="text-xs text-gray-600 dark:text-gray-500 font-mono">Loop Definition</span>
                                            </div>
                                            <pre class="p-4 text-sm font-mono text-gray-700 dark:text-gray-300 overflow-x-auto"><code><span class="text-purple-400">loops:</span>
  <span class="text-blue-400">feature_development:</span>
    - <span class="text-green-400">id:</span> implement
      <span class="text-green-400">agent:</span> implementer
      <span class="text-green-400">instructions:</span> |
        Implement: {task.title}

        1. Read relevant files to understand context
        2. Plan the implementation approach
        3. Write the code
        4. Verify it compiles

    - <span class="text-green-400">id:</span> test
      <span class="text-green-400">agent:</span> tester
      <span class="text-green-400">instructions:</span> |
        Run tests for: {task.title}

        1. Run the existing test suite
        2. Identify any failing tests
        3. Fix any test failures
        4. Ensure all tests pass
      <span class="text-green-400">on_fail:</span> retry

    - <span class="text-green-400">id:</span> review
      <span class="text-green-400">agent:</span> reviewer
      <span class="text-green-400">instructions:</span> |
        Review implementation of: {task.title}

        Check for:
        1. Security vulnerabilities
        2. Proper error handling
        3. Code quality and patterns

    - <span class="text-green-400">id:</span> resolution
      <span class="text-green-400">instructions:</span> |
        <span class="text-gray-500"># No agent specified - main Claude handles this</span>
        Address any issues from the review of: {task.title}</code></pre>
                                        </div>

                                    </div>

                                    <!-- Task Variables -->
                                    <div>
                                        <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">Task Variables</h3>
                                        <p class="text-gray-600 dark:text-gray-400 mb-4">
                                            Within loop sub-step instructions, you can reference task properties using curly brace syntax:
                                        </p>

                                        <div class="grid md:grid-cols-3 gap-4 mb-4">
                                            <div class="bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-200 dark:border-indigo-800 rounded-lg p-4">
                                                <h5 class="font-bold text-gray-900 dark:text-white mb-2 font-mono text-sm">{task.id}</h5>
                                                <p class="text-sm text-gray-600 dark:text-gray-400">
                                                    The unique identifier for the current task (e.g., "add-login-form").
                                                </p>
                                            </div>

                                            <div class="bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-200 dark:border-indigo-800 rounded-lg p-4">
                                                <h5 class="font-bold text-gray-900 dark:text-white mb-2 font-mono text-sm">{task.title}</h5>
                                                <p class="text-sm text-gray-600 dark:text-gray-400">
                                                    The concise title of the current task (e.g., "Login form UI").
                                                </p>
                                            </div>

                                        </div>

                                        <div class="bg-gray-100 dark:bg-black/30 rounded-lg overflow-hidden">
                                            <div class="flex items-center gap-2 px-4 py-2 border-b border-gray-200 dark:border-white/10 bg-gray-200 dark:bg-black/40">
                                                <span class="text-xs text-gray-600 dark:text-gray-500 font-mono">Example: Using Task Variables</span>
                                            </div>
                                            <pre class="p-4 text-sm font-mono text-gray-700 dark:text-gray-300 overflow-x-auto"><code><span class="text-green-400">instructions:</span> |
  Implement: {task.title}

  Task ID for reference: {task.id}

  1. Read relevant files
  2. Implement the feature
  3. Verify it works</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </section>

                        <!-- Section 7: Creating a Workflow -->
                        <section id="creating-workflow" class="doc-section mb-16 scroll-mt-24 hidden">
                            <div class="bg-white dark:bg-vscode-sidebar rounded-xl border border-gray-200 dark:border-white/10 p-8">
                                <div class="flex items-center gap-4 mb-6">
                                    <div class="w-12 h-12 rounded-lg bg-vscode-accent/10 flex items-center justify-center">
                                        <svg class="w-6 h-6 text-vscode-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>
                                    </div>
                                    <h2 class="text-3xl font-bold text-gray-900 dark:text-white">Creating a Workflow</h2>
                                </div>
                                <p class="text-gray-600 dark:text-gray-400 mb-6">
                                    Learn how to create custom workflows for your projects, with a complete annotated example and best practices.
                                </p>

                                <div class="space-y-10">
                                    <!-- Creating Custom Workflows -->
                                    <div>
                                        <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">Step-by-Step Guide</h3>
                                        <p class="text-gray-600 dark:text-gray-400 mb-4">
                                            Custom workflows let you define project-specific development processes. They appear in the "Custom" section of the workflow dropdown.
                                        </p>
                                        <ol class="space-y-4 mb-6">
                                            <li class="flex gap-3">
                                                <span class="flex-shrink-0 w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold text-sm">1</span>
                                                <div class="flex-1">
                                                    <h5 class="font-semibold text-gray-900 dark:text-white mb-1">Define corresponding agents (if needed)</h5>
                                                    <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">
                                                        First thing you will want to do is make sure you have already created all the agents you want to use in your workflow ahead of time. This is because agent names in your workflow must match either inline definitions or external agent files.
                                                    </p>
                                                    <div class="bg-gray-100 dark:bg-black/30 rounded p-2 font-mono text-sm text-gray-700 dark:text-gray-300 mb-2">
                                                        mkdir -p .claude/agents<br>
                                                        # Create .claude/agents/my-agent.md
                                                    </div>
                                                    <p class="text-xs text-gray-500 dark:text-gray-400">
                                                        Note: Inline agent definitions in the workflow file take precedence over external files.
                                                    </p>
                                                </div>
                                            </li>

                                            <li class="flex gap-3">
                                                <span class="flex-shrink-0 w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold text-sm">2</span>
                                                <div class="flex-1">
                                                    <h5 class="font-semibold text-gray-900 dark:text-white mb-1">Start creating a workflow document</h5>
                                                    <p class="text-sm text-gray-600 dark:text-gray-400">
                                                        Open the Lanes sidebar → Open the "Workflow" window → Press the '+' icon.
                                                    </p>
                                                </div>
                                            </li>

                                            <li class="flex gap-3">
                                                <span class="flex-shrink-0 w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold text-sm">3</span>
                                                <div class="flex-1">
                                                    <h5 class="font-semibold text-gray-900 dark:text-white mb-1">Start creating a workflow document</h5>
                                                    <p class="text-sm text-gray-600 dark:text-gray-400">
                                                        If you like, choose a template to start from (feature, bugfix, refactor, or default). This will create a new YAML file in <code class="text-xs bg-gray-200 dark:bg-black/30 px-1 rounded">.claude/lanes/workflows/</code>.
                                                    </p>
                                                </div>
                                            </li>

                                            <li class="flex gap-3">
                                                <span class="flex-shrink-0 w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold text-sm">4</span>
                                                <div class="flex-1">
                                                    <h5 class="font-semibold text-gray-900 dark:text-white mb-1">Write your workflow</h5>
                                                    <p class="text-sm text-gray-600 dark:text-gray-400">
                                                        Edit your the template document, you can use the examples below or use the Workflow Structure page for guidance.
                                                    </p>
                                                </div>
                                            </li>

                                            <li class="flex gap-3">
                                                <span class="flex-shrink-0 w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold text-sm">5</span>
                                                <div class="flex-1">
                                                    <h5 class="font-semibold text-gray-900 dark:text-white mb-1">Validate your workflow</h5>
                                                    <p class="text-sm text-gray-600 dark:text-gray-400">
                                                        The lanes extension comes with the 'Validate Workflow' command which you cna find in your command palette. This will check your workflow for common errors and help ensure it is correctly formatted.
                                                    </p>
                                                </div>
                                            </li>

                                            <li class="flex gap-3">
                                                <span class="flex-shrink-0 w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold text-sm">6</span>
                                                <div class="flex-1">
                                                    <h5 class="font-semibold text-gray-900 dark:text-white mb-1">Use the new Workflow</h5>
                                                    <p class="text-sm text-gray-600 dark:text-gray-400">
                                                        The workflow should now appear in the workflow dropdown in the Lanes New Session window. You might need to use the refresh button. Select it to start using your custom workflow for new worktrees.
                                                    </p>
                                                </div>
                                            </li>
                                        </ol>

                                    </div>

                                    <!-- Complete Annotated Example -->
                                    <div>
                                        <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">Complete Annotated Example</h3>
                                        <p class="text-gray-600 dark:text-gray-400 mb-4">
                                            Here's a complete workflow template with detailed annotations explaining each section:
                                        </p>

                                        <div class="bg-gray-100 dark:bg-black/30 rounded-lg overflow-hidden">
                                            <div class="flex items-center gap-2 px-4 py-2 border-b border-gray-200 dark:border-white/10 bg-gray-200 dark:bg-black/40">
                                                <span class="text-xs text-gray-600 dark:text-gray-500 font-mono">my-custom-workflow.yaml</span>
                                            </div>
                                            <pre class="p-4 text-sm font-mono text-gray-700 dark:text-gray-300 overflow-x-auto" style="max-height: 600px;"><code><span class="text-gray-500"># ==============================================================================</span>
<span class="text-gray-500"># WORKFLOW TEMPLATE: Custom Feature Development</span>
<span class="text-gray-500"># ==============================================================================</span>

<span class="text-gray-500"># Required: Unique name for this workflow</span>
<span class="text-purple-400">name:</span> custom-dev-workflow

<span class="text-gray-500"># Required: Description shown in workflow selector</span>
<span class="text-purple-400">description:</span> Custom workflow for our team's feature development process

<span class="text-gray-500"># ==============================================================================</span>
<span class="text-gray-500"># AGENTS: Define specialized roles with tool permissions</span>
<span class="text-gray-500"># ==============================================================================</span>
<span class="text-purple-400">agents:</span>
  <span class="text-gray-500"># Planning agent - can read code but not modify it</span>
  <span class="text-blue-400">planner:</span>
    <span class="text-green-400">description:</span> Analyzes requirements and breaks down work
    <span class="text-green-400">tools:</span>
      - Read      <span class="text-gray-500"># Can read files</span>
      - Glob      <span class="text-gray-500"># Can find files by pattern</span>
      - Grep      <span class="text-gray-500"># Can search file contents</span>
      - Task      <span class="text-gray-500"># Can spawn sub-agents</span>
    <span class="text-green-400">cannot:</span>
      - Write     <span class="text-gray-500"># Cannot create files</span>
      - Edit      <span class="text-gray-500"># Cannot modify files</span>
      - Bash      <span class="text-gray-500"># Cannot run commands</span>
      - commit    <span class="text-gray-500"># Cannot commit changes</span>

  <span class="text-gray-500"># Implementation agent - can write code but not commit</span>
  <span class="text-blue-400">coder:</span>
    <span class="text-green-400">description:</span> Implements features according to plan
    <span class="text-green-400">tools:</span>
      - Read
      - Write
      - Edit
      - Bash
      - Glob
      - Grep
    <span class="text-green-400">cannot:</span>
      - commit    <span class="text-gray-500"># Cannot commit (that's done at workflow level)</span>
      - Task      <span class="text-gray-500"># Cannot spawn more agents</span>

  <span class="text-gray-500"># Test agent - can run tests and fix test code</span>
  <span class="text-blue-400">tester:</span>
    <span class="text-green-400">description:</span> Runs tests and fixes failures
    <span class="text-green-400">tools:</span>
      - Read
      - Edit      <span class="text-gray-500"># Can fix test code</span>
      - Bash      <span class="text-gray-500"># Can run test commands</span>
    <span class="text-green-400">cannot:</span>
      - Write     <span class="text-gray-500"># Cannot create new files</span>
      - commit
      - Task

  <span class="text-gray-500"># Review agent - read-only, provides feedback</span>
  <span class="text-blue-400">reviewer:</span>
    <span class="text-green-400">description:</span> Reviews code quality and security
    <span class="text-green-400">tools:</span>
      - Read
      - Glob
      - Grep
    <span class="text-green-400">cannot:</span>
      - Write
      - Edit
      - Bash
      - commit
      - Task

<span class="text-gray-500"># ==============================================================================</span>
<span class="text-gray-500"># LOOPS: Reusable sub-workflows that iterate over tasks</span>
<span class="text-gray-500"># ==============================================================================</span>
<span class="text-purple-400">loops:</span>
  <span class="text-gray-500"># This loop executes for each task in the task list</span>
  <span class="text-blue-400">build_feature:</span>
    <span class="text-gray-500"># Sub-step 1: Implement the feature</span>
    - <span class="text-green-400">id:</span> code
      <span class="text-green-400">agent:</span> coder
      <span class="text-green-400">instructions:</span> |
        Implement: {task.title}

        Steps:
        1. Read relevant files to understand context
        2. Plan your implementation approach
        3. Write the code
        4. Verify it compiles without errors

        Do NOT run tests - that's handled in the next step.

    <span class="text-gray-500"># Sub-step 2: Test the implementation</span>
    - <span class="text-green-400">id:</span> test
      <span class="text-green-400">agent:</span> tester
      <span class="text-green-400">instructions:</span> |
        Test the implementation of: {task.title}

        1. Run the full test suite
        2. Identify any failing tests
        3. Fix test failures
        4. Ensure all tests pass
        5. Report test results
      <span class="text-green-400">on_fail:</span> retry  <span class="text-gray-500"># Retry if tests fail</span>

    <span class="text-gray-500"># Sub-step 3: Review the code</span>
    - <span class="text-green-400">id:</span> review
      <span class="text-green-400">agent:</span> reviewer
      <span class="text-green-400">instructions:</span> |
        Review the implementation of: {task.title}

        Check for:
        1. Security vulnerabilities
        2. Proper error handling
        3. Code quality and maintainability
        4. Adherence to project patterns
        5. Edge cases and potential bugs

        Provide specific feedback on any issues found.

    <span class="text-gray-500"># Sub-step 4: Address review feedback (no agent = main Claude)</span>
    - <span class="text-green-400">id:</span> fix_issues
      <span class="text-green-400">instructions:</span> |
        Review feedback for: {task.title}

        1. Read the reviewer's feedback
        2. If there are critical issues, fix them
        3. If there are minor suggestions, note them for future work
        4. Mark the task as complete

<span class="text-gray-500"># ==============================================================================</span>
<span class="text-gray-500"># STEPS: Main workflow sequence (executed in order)</span>
<span class="text-gray-500"># ==============================================================================</span>
<span class="text-purple-400">steps:</span>
  <span class="text-gray-500"># Step 1: ACTION type - single operation by planner agent</span>
  - <span class="text-green-400">id:</span> analyze
    <span class="text-green-400">type:</span> action
    <span class="text-green-400">agent:</span> planner
    <span class="text-green-400">instructions:</span> |
      Analyze the user's goal and break it into discrete tasks.

      Consider:
      1. What features or changes are needed?
      2. What are the dependencies between tasks?
      3. What is the optimal implementation order?

      Document your analysis clearly.

  <span class="text-gray-500"># Step 2: ACTION type - planner defines the task list</span>
  - <span class="text-green-400">id:</span> create_tasks
    <span class="text-green-400">type:</span> action
    <span class="text-green-400">agent:</span> planner
    <span class="text-green-400">instructions:</span> |
      Create a task list based on your analysis.

      For each task, define:
      - id: unique-identifier (e.g., 'add-login', 'fix-validation')
      - title: Clear, concise title (e.g., 'Add login form')
      - description: Detailed requirements

      Call workflow_set_tasks('build_feature', tasks) when ready.

  <span class="text-gray-500"># Step 3: LOOP type - references the 'build_feature' loop above</span>
  <span class="text-gray-500"># This will execute all sub-steps for each task</span>
  - <span class="text-green-400">id:</span> build_feature
    <span class="text-green-400">type:</span> loop

  <span class="text-gray-500"># Step 4: ACTION type - final review of all changes</span>
  - <span class="text-green-400">id:</span> final_review
    <span class="text-green-400">type:</span> action
    <span class="text-green-400">agent:</span> reviewer
    <span class="text-green-400">instructions:</span> |
      Review the complete implementation.

      Check:
      1. Consistency across all changes
      2. Integration between features
      3. Overall code quality
      4. Any missed requirements from the original goal

      Provide a summary of the implementation quality.

  <span class="text-gray-500"># Step 5: ACTION type - finalize and prepare for commit</span>
  - <span class="text-green-400">id:</span> finalize
    <span class="text-green-400">type:</span> action
    <span class="text-green-400">instructions:</span> |
      <span class="text-gray-500"># No agent specified - main Claude handles this</span>
      Finalize the implementation.

      1. Review the final review feedback
      2. Address any critical issues
      3. Run final tests
      4. Prepare a summary of what was accomplished
      5. The workflow will complete and you can commit</code></pre>
                                        </div>
                                    </div>

                                    <!-- Best Practices -->
                                    <div>
                                        <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">Best Practices for Custom Workflows</h3>

                                        <div class="space-y-4">
                                            <div class="bg-green-50 dark:bg-green-900/20 border-l-4 border-green-500 p-4">
                                                <h5 class="font-bold text-green-900 dark:text-green-200 mb-2">Keep Agent Roles Focused</h5>
                                                <p class="text-sm text-gray-700 dark:text-gray-300">
                                                    Each agent should have a single, clear responsibility. Don't create "super agents" that can do everything.
                                                    Focused agents enforce separation of concerns and prevent mistakes.
                                                </p>
                                            </div>

                                            <div class="bg-green-50 dark:bg-green-900/20 border-l-4 border-green-500 p-4">
                                                <h5 class="font-bold text-green-900 dark:text-green-200 mb-2">Use Clear, Specific Instructions</h5>
                                                <p class="text-sm text-gray-700 dark:text-gray-300">
                                                    Instructions should be explicit and actionable. Include numbered steps, expected outputs, and what NOT to do.
                                                    Remember that different Claude instances will execute these instructions across context windows.
                                                </p>
                                            </div>

                                            <div class="bg-green-50 dark:bg-green-900/20 border-l-4 border-green-500 p-4">
                                                <h5 class="font-bold text-green-900 dark:text-green-200 mb-2">Enforce Boundaries with "cannot"</h5>
                                                <p class="text-sm text-gray-700 dark:text-gray-300">
                                                    Always specify what agents cannot do. A reviewer shouldn't modify code. A tester shouldn't create new features.
                                                    The <code class="text-xs bg-green-200 dark:bg-green-900/50 px-1 rounded">cannot</code> field prevents agents from overstepping their role.
                                                </p>
                                            </div>

                                            <div class="bg-green-50 dark:bg-green-900/20 border-l-4 border-green-500 p-4">
                                                <h5 class="font-bold text-green-900 dark:text-green-200 mb-2">Use on_fail Strategically</h5>
                                                <p class="text-sm text-gray-700 dark:text-gray-300">
                                                    • <code class="text-xs bg-green-200 dark:bg-green-900/50 px-1 rounded">retry</code> - For test failures or transient issues<br>
                                                    • <code class="text-xs bg-green-200 dark:bg-green-900/50 px-1 rounded">skip</code> - For optional steps that might fail<br>
                                                    • <code class="text-xs bg-green-200 dark:bg-green-900/50 px-1 rounded">abort</code> (default) - For critical steps that must succeed
                                                </p>
                                            </div>

                                            <div class="bg-green-50 dark:bg-green-900/20 border-l-4 border-green-500 p-4">
                                                <h5 class="font-bold text-green-900 dark:text-green-200 mb-2">Use Task Variables</h5>
                                                <p class="text-sm text-gray-700 dark:text-gray-300">
                                                    Always reference <code class="text-xs bg-green-200 dark:bg-green-900/50 px-1 rounded">{task.id}</code> and <code class="text-xs bg-green-200 dark:bg-green-900/50 px-1 rounded">{task.title}</code>
                                                    in loop instructions. This provides context across different tasks and helps Claude understand what it's working on.
                                                </p>
                                            </div>

                                            <div class="bg-green-50 dark:bg-green-900/20 border-l-4 border-green-500 p-4">
                                                <h5 class="font-bold text-green-900 dark:text-green-200 mb-2">Test Your Workflow</h5>
                                                <p class="text-sm text-gray-700 dark:text-gray-300">
                                                    Before rolling out a custom workflow to your team, test it on a real task. Verify that:
                                                    • Each step produces the expected output
                                                    • Agents respect their tool restrictions
                                                    • The workflow completes successfully
                                                    • The final result matches expectations
                                                </p>
                                            </div>

                                            <div class="bg-green-50 dark:bg-green-900/20 border-l-4 border-green-500 p-4">
                                                <h5 class="font-bold text-green-900 dark:text-green-200 mb-2">Version Control Your Workflows</h5>
                                                <p class="text-sm text-gray-700 dark:text-gray-300">
                                                    Commit your <code class="text-xs bg-green-200 dark:bg-green-900/50 px-1 rounded">.claude/lanes/workflows/</code> directory to git.
                                                    This ensures your team uses consistent workflows and you can track changes over time.
                                                </p>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Validation and Debugging -->
                                    <div>
                                        <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">Validation and Debugging</h3>

                                        <p class="text-gray-600 dark:text-gray-400 mb-4">
                                            Lanes validates workflow templates when they're loaded. Common validation errors:
                                        </p>

                                        <div class="space-y-3">
                                            <div class="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4">
                                                <h5 class="font-bold text-red-900 dark:text-red-200 mb-2 font-mono text-sm">Agent 'X' references unknown agent 'Y'</h5>
                                                <p class="text-sm text-gray-700 dark:text-gray-300 mb-2">
                                                    A step references an agent that isn't defined. Check:
                                                </p>
                                                <ul class="text-sm text-gray-700 dark:text-gray-300 list-disc list-inside ml-4">
                                                    <li>Is the agent name spelled correctly?</li>
                                                    <li>Is the agent defined in the <code class="text-xs bg-red-200 dark:bg-red-900/50 px-1 rounded">agents:</code> section?</li>
                                                    <li>Does a matching file exist in <code class="text-xs bg-red-200 dark:bg-red-900/50 px-1 rounded">.claude/agents/</code>?</li>
                                                </ul>
                                            </div>

                                            <div class="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4">
                                                <h5 class="font-bold text-red-900 dark:text-red-200 mb-2 font-mono text-sm">Loop step 'X' references unknown loop definition</h5>
                                                <p class="text-sm text-gray-700 dark:text-gray-300">
                                                    A <code class="text-xs bg-red-200 dark:bg-red-900/50 px-1 rounded">type: loop</code> step's <code class="text-xs bg-red-200 dark:bg-red-900/50 px-1 rounded">id</code>
                                                    doesn't match any loop in the <code class="text-xs bg-red-200 dark:bg-red-900/50 px-1 rounded">loops:</code> section.
                                                    The loop step ID must exactly match a loop name.
                                                </p>
                                            </div>

                                            <div class="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4">
                                                <h5 class="font-bold text-red-900 dark:text-red-200 mb-2 font-mono text-sm">Invalid YAML syntax</h5>
                                                <p class="text-sm text-gray-700 dark:text-gray-300 mb-2">
                                                    YAML parsing failed. Common issues:
                                                </p>
                                                <ul class="text-sm text-gray-700 dark:text-gray-300 list-disc list-inside ml-4">
                                                    <li>Incorrect indentation (YAML uses 2 spaces, not tabs)</li>
                                                    <li>Missing colons after keys</li>
                                                    <li>Unquoted strings with special characters</li>
                                                    <li>Inconsistent list formatting</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Next Steps -->
                                    <div class="bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-6">
                                        <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-3">Next Steps</h3>
                                        <p class="text-gray-700 dark:text-gray-300 mb-4">
                                            Now that you understand workflow templates, you might want to:
                                        </p>
                                        <ul class="space-y-2 text-sm text-gray-700 dark:text-gray-300">
                                            <li class="flex items-center gap-2">
                                                <svg class="w-4 h-4 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                                </svg>
                                                <a href="#lanes-mcp" class="text-vscode-accent hover:underline">Learn about the Lanes MCP Server</a> - Understanding how workflows communicate with Claude
                                            </li>
                                            <li class="flex items-center gap-2">
                                                <svg class="w-4 h-4 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                                </svg>
                                                <span>Study the built-in workflows in <code class="text-xs bg-blue-200 dark:bg-blue-900/50 px-1 rounded">workflows/</code> for real-world examples</span>
                                            </li>
                                            <li class="flex items-center gap-2">
                                                <svg class="w-4 h-4 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                                </svg>
                                                <span>Create a custom workflow for your team's specific development process</span>
                                            </li>
                                            <li class="flex items-center gap-2">
                                                <svg class="w-4 h-4 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                                </svg>
                                                <a href="https://www.anthropic.com/engineering/effective-harnesses-for-long-running-agents" class="text-vscode-accent hover:underline" target="_blank">Read Anthropic's research</a> on effective harnesses for long-running agents
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </section>

                        <!-- Section 8: Lanes MCP -->
                        <section id="lanes-mcp" class="doc-section mb-16 scroll-mt-24 hidden">
                            <div class="bg-white dark:bg-vscode-sidebar rounded-xl border border-gray-200 dark:border-white/10 p-8">
                                <div class="flex items-center gap-4 mb-6">
                                    <div class="w-12 h-12 rounded-lg bg-vscode-accent/10 flex items-center justify-center">
                                        <svg class="w-6 h-6 text-vscode-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                                    </div>
                                    <h2 class="text-3xl font-bold text-gray-900 dark:text-white">Lanes MCP</h2>
                                </div>
                                <p class="text-gray-600 dark:text-gray-400 mb-6">
                                    The Lanes Model Context Protocol (MCP) server enables workflows to maintain state, track progress, and coordinate between agents across context windows. This technical explains how the MCP integration works under the hood.
                                </p>

                                <div class="space-y-8">
                                    <!-- What is MCP? -->
                                    <div>
                                        <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">What is MCP?</h3>
                                        <p class="text-gray-600 dark:text-gray-400 mb-4">
                                            The <strong class="text-gray-900 dark:text-white">Model Context Protocol (MCP)</strong> is Anthropic's open protocol that enables AI assistants to securely connect to data sources and tools. It provides a standardized way to extend Claude with custom capabilities while maintaining security and control.
                                        </p>
                                        <p class="text-gray-600 dark:text-gray-400 mb-4">
                                            The Lanes MCP server is a specialized MCP implementation that gives Claude fine-grained control over workflow execution:
                                        </p>
                                        <ul class="list-disc list-inside text-gray-600 dark:text-gray-400 space-y-2 ml-4">
                                            <li><strong class="text-gray-900 dark:text-white">Workflow State Management:</strong> Tracks current position in workflow, step outputs, and task progress</li>
                                            <li><strong class="text-gray-900 dark:text-white">Session Management:</strong> Allows Claude to request creation of new Lanes sessions programmatically</li>
                                            <li><strong class="text-gray-900 dark:text-white">Context Preservation:</strong> Maintains history across steps so agents can reference earlier work</li>
                                        </ul>
                                        <div class="mt-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4">
                                            <p class="text-sm text-blue-900 dark:text-blue-300">
                                                <strong>Learn more:</strong> Visit <a href="https://modelcontextprotocol.io/" class="underline hover:text-blue-700 dark:hover:text-blue-400" target="_blank">modelcontextprotocol.io</a> for the official MCP specification.
                                            </p>
                                        </div>
                                    </div>

                                    <!-- Architecture -->
                                    <div>
                                        <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">Architecture</h3>
                                        <p class="text-gray-600 dark:text-gray-400 mb-4">
                                            When you start a workflow session, Lanes automatically spins up an MCP server process that communicates with Claude via stdio:
                                        </p>
                                        <div class="bg-gray-100 dark:bg-black/30 rounded-lg p-6 mb-4">
                                            <pre class="text-sm font-mono text-gray-800 dark:text-gray-300 overflow-x-auto"><code>┌─────────────────────────────────────────────────────────┐
│                    VS Code Extension                    │
│                                                         │
│  ┌──────────────────────────────────────────────────┐  │
│  │  Start Workflow Session                          │  │
│  └──────────────────┬───────────────────────────────┘  │
│                     │                                   │
│                     ▼                                   │
│  ┌──────────────────────────────────────────────────┐  │
│  │  Spawn MCP Server Process                        │  │
│  │  node server.js --worktree <path> --workflow-path│  │
│  └──────────────────┬───────────────────────────────┘  │
│                     │                                   │
│                     ▼                                   │
│  ┌──────────────────────────────────────────────────┐  │
│  │  Generate .claude/mcp.json config                │  │
│  └──────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────┘
                      │
                      ▼ stdio transport
┌─────────────────────────────────────────────────────────┐
│                   MCP Server Process                    │
│                                                         │
│  ┌──────────────────────────────────────────────────┐  │
│  │  Workflow State Machine                          │  │
│  │  - Current step/sub-step                         │  │
│  │  - Task iteration                                │  │
│  │  - Step outputs history                          │  │
│  └──────────────────────────────────────────────────┘  │
│                     │                                   │
│                     ▼                                   │
│  ┌──────────────────────────────────────────────────┐  │
│  │  Tool Handlers                                   │  │
│  │  - workflow_start                                │  │
│  │  - workflow_set_tasks                            │  │
│  │  - workflow_status                               │  │
│  │  - workflow_advance                              │  │
│  │  - workflow_context                              │  │
│  │  - session_create                                │  │
│  └──────────────────────────────────────────────────┘  │
│                     │                                   │
│                     ▼                                   │
│  ┌──────────────────────────────────────────────────┐  │
│  │  File System Persistence                         │  │
│  │  - workflow-state.json (state)                   │  │
│  └──────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────┘
                      │
                      ▼ MCP protocol
┌─────────────────────────────────────────────────────────┐
│                    Claude Code                          │
│                                                         │
│  Calls MCP tools to navigate workflow steps             │
└─────────────────────────────────────────────────────────┘</code></pre>
                                        </div>
                                        <p class="text-gray-600 dark:text-gray-400">
                                            The MCP server runs in the background for the lifetime of the session. Claude can call the MCP tools at any time to query or update workflow state.
                                        </p>
                                    </div>

                                    <!-- MCP Tools -->
                                    <div>
                                        <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">MCP Tools Reference</h3>
                                        <p class="text-gray-600 dark:text-gray-400 mb-4">
                                            The Lanes MCP server exposes six tools that Claude uses to control workflow execution:
                                        </p>

                                        <!-- Tool: workflow_start -->
                                        <div class="mb-6">
                                            <div class="bg-gray-100 dark:bg-black/30 rounded-lg p-5">
                                                <h4 class="text-lg font-bold text-gray-900 dark:text-white mb-3">
                                                    <code class="text-base bg-gray-200 dark:bg-black/40 px-2 py-1 rounded">workflow_start</code>
                                                </h4>
                                                <p class="text-sm text-gray-600 dark:text-gray-400 mb-3">
                                                    Initialize the workflow and return the first step instructions. If the workflow was previously started, returns the current status (enables resume).
                                                </p>
                                                <div class="mb-3">
                                                    <p class="text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2">Parameters:</p>
                                                    <div class="bg-white dark:bg-black/20 rounded p-3 text-xs font-mono">
                                                        <div class="mb-2">
                                                            <span class="text-blue-600 dark:text-blue-400">summary</span>
                                                            <span class="text-gray-500">?: string</span>
                                                            <span class="text-gray-600 dark:text-gray-400 ml-2">// Optional brief summary (max 10 words)</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="mb-3">
                                                    <p class="text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2">Returns:</p>
                                                    <div class="bg-white dark:bg-black/20 rounded p-3 text-xs font-mono overflow-x-auto">
<pre class="text-gray-800 dark:text-gray-200">{
  "status": "active",
  "step": {
    "id": "plan",
    "type": "action",
    "agent": "orchestrator",
    "instructions": "Analyze the goal and break it into..."
  },
  "progress": {
    "currentStepIndex": 0,
    "totalSteps": 5,
    "stepsCompleted": 0
  },
  "summary": "Add user authentication"
}</pre>
                                                    </div>
                                                </div>
                                                <div>
                                                    <p class="text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2">Example Usage:</p>
                                                    <div class="bg-white dark:bg-black/20 rounded p-3 text-xs font-mono">
                                                        <span class="text-purple-600 dark:text-purple-400">workflow_start</span>(<span class="text-green-600 dark:text-green-400">"Add user authentication"</span>)
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Tool: workflow_set_tasks -->
                                        <div class="mb-6">
                                            <div class="bg-gray-100 dark:bg-black/30 rounded-lg p-5">
                                                <h4 class="text-lg font-bold text-gray-900 dark:text-white mb-3">
                                                    <code class="text-base bg-gray-200 dark:bg-black/40 px-2 py-1 rounded">workflow_set_tasks</code>
                                                </h4>
                                                <p class="text-sm text-gray-600 dark:text-gray-400 mb-3">
                                                    Associate tasks with a loop step. Each task will be iterated through the loop's sub-steps.</code>.
                                                </p>
                                                <div class="mb-3">
                                                    <p class="text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2">Parameters:</p>
                                                    <div class="bg-white dark:bg-black/20 rounded p-3 text-xs font-mono">
                                                        <div class="mb-2">
                                                            <span class="text-blue-600 dark:text-blue-400">loop_id</span>
                                                            <span class="text-gray-500">: string</span>
                                                            <span class="text-gray-600 dark:text-gray-400 ml-2">// Loop step ID to associate tasks with</span>
                                                        </div>
                                                        <div>
                                                            <span class="text-blue-600 dark:text-blue-400">tasks</span>
                                                            <span class="text-gray-500">: Task[]</span>
                                                            <span class="text-gray-600 dark:text-gray-400 ml-2">// Array of task objects</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="mb-3">
                                                    <p class="text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2">Task Object:</p>
                                                    <div class="bg-white dark:bg-black/20 rounded p-3 text-xs font-mono">
<pre class="text-gray-800 dark:text-gray-200">{
  "id": string,            // Unique identifier
  "title": string,         // Human-readable title
  "description"?: string   // Optional detailed description
}</pre>
                                                    </div>
                                                </div>
                                                <div class="mb-3">
                                                    <p class="text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2">Returns:</p>
                                                    <div class="bg-white dark:bg-black/20 rounded p-3 text-xs font-mono">
<pre class="text-gray-800 dark:text-gray-200">{
  "success": true,
  "tasksSet": 3
}</pre>
                                                    </div>
                                                </div>
                                                <div>
                                                    <p class="text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2">Example Usage:</p>
                                                    <div class="bg-white dark:bg-black/20 rounded p-3 text-xs font-mono overflow-x-auto">
<pre class="text-gray-800 dark:text-gray-200"><span class="text-purple-600 dark:text-purple-400">workflow_set_tasks</span>(<span class="text-green-600 dark:text-green-400">"feature_development"</span>, [
  {
    <span class="text-blue-600 dark:text-blue-400">id</span>: <span class="text-green-600 dark:text-green-400">"login-form"</span>,
    <span class="text-blue-600 dark:text-blue-400">title</span>: <span class="text-green-600 dark:text-green-400">"Create login form"</span>,
    <span class="text-blue-600 dark:text-blue-400">description</span>: <span class="text-green-600 dark:text-green-400">"Build login form with email and password"</span>
  },
  {
    <span class="text-blue-600 dark:text-blue-400">id</span>: <span class="text-green-600 dark:text-green-400">"auth-api"</span>,
    <span class="text-blue-600 dark:text-blue-400">title</span>: <span class="text-green-600 dark:text-green-400">"Implement auth API"</span>,
    <span class="text-blue-600 dark:text-blue-400">description</span>: <span class="text-green-600 dark:text-green-400">"Create API endpoint for authentication"</span>
  }
])</pre>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Tool: workflow_status -->
                                        <div class="mb-6">
                                            <div class="bg-gray-100 dark:bg-black/30 rounded-lg p-5">
                                                <h4 class="text-lg font-bold text-gray-900 dark:text-white mb-3">
                                                    <code class="text-base bg-gray-200 dark:bg-black/40 px-2 py-1 rounded">workflow_status</code>
                                                </h4>
                                                <p class="text-sm text-gray-600 dark:text-gray-400 mb-3">
                                                    Get current workflow position with full context. Returns the current step, sub-step (if in a loop), agent, instructions, and progress.
                                                </p>
                                                <div class="mb-3">
                                                    <p class="text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2">Parameters:</p>
                                                    <div class="bg-white dark:bg-black/20 rounded p-3 text-xs font-mono">
                                                        <span class="text-gray-600 dark:text-gray-400">None</span>
                                                    </div>
                                                </div>
                                                <div class="mb-3">
                                                    <p class="text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2">Returns (in loop):</p>
                                                    <div class="bg-white dark:bg-black/20 rounded p-3 text-xs font-mono overflow-x-auto">
<pre class="text-gray-800 dark:text-gray-200">{
  "status": "active",
  "step": {
    "id": "feature_development",
    "type": "loop",
    "subStep": {
      "id": "implement",
      "agent": "implementer",
      "instructions": "Implement: Create login form..."
    }
  },
  "task": {
    "id": "login-form",
    "title": "Create login form",
    "index": 0,
    "total": 2
  },
  "progress": {
    "currentStepIndex": 2,
    "totalSteps": 5,
    "stepsCompleted": 1
  }
}</pre>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Tool: workflow_advance -->
                                        <div class="mb-6">
                                            <div class="bg-gray-100 dark:bg-black/30 rounded-lg p-5">
                                                <h4 class="text-lg font-bold text-gray-900 dark:text-white mb-3">
                                                    <code class="text-base bg-gray-200 dark:bg-black/40 px-2 py-1 rounded">workflow_advance</code>
                                                </h4>
                                                <p class="text-sm text-gray-600 dark:text-gray-400 mb-3">
                                                    Complete the current step/sub-step and advance to the next. When a task completes (all sub-steps done), automatically updates <code class="text-xs bg-gray-200 dark:bg-black/30 px-1 rounded">workflow-state.json</code> to mark the task as <code class="text-xs">passes: true</code>.
                                                </p>
                                                <div class="mb-3">
                                                    <p class="text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2">Parameters:</p>
                                                    <div class="bg-white dark:bg-black/20 rounded p-3 text-xs font-mono">
                                                        <div>
                                                            <span class="text-blue-600 dark:text-blue-400">output</span>
                                                            <span class="text-gray-500">: string</span>
                                                            <span class="text-gray-600 dark:text-gray-400 ml-2">// Summary of what was accomplished</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="mb-3">
                                                    <p class="text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2">Returns:</p>
                                                    <div class="bg-white dark:bg-black/20 rounded p-3 text-xs font-mono overflow-x-auto">
<pre class="text-gray-800 dark:text-gray-200">{
  "status": "active",
  "step": {
    "id": "feature_development",
    "type": "loop",
    "subStep": {
      "id": "test",
      "agent": "tester",
      "instructions": "Run tests for: Create login form..."
    }
  },
  "task": {
    "id": "login-form",
    "title": "Create login form",
    "index": 0,
    "total": 2
  },
  "progress": { ... }
}</pre>
                                                    </div>
                                                </div>
                                                <div>
                                                    <p class="text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2">Example Usage:</p>
                                                    <div class="bg-white dark:bg-black/20 rounded p-3 text-xs font-mono">
                                                        <span class="text-purple-600 dark:text-purple-400">workflow_advance</span>(<span class="text-green-600 dark:text-green-400">"Implemented login form with email and password fields"</span>)
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Tool: workflow_context -->
                                        <div class="mb-6">
                                            <div class="bg-gray-100 dark:bg-black/30 rounded-lg p-5">
                                                <h4 class="text-lg font-bold text-gray-900 dark:text-white mb-3">
                                                    <code class="text-base bg-gray-200 dark:bg-black/40 px-2 py-1 rounded">workflow_context</code>
                                                </h4>
                                                <p class="text-sm text-gray-600 dark:text-gray-400 mb-3">
                                                    Get outputs from previous steps. Returns a record keyed by step path (e.g., <code class="text-xs">"plan"</code> or <code class="text-xs">"feature_development.login-form.implement"</code>).
                                                </p>
                                                <div class="mb-3">
                                                    <p class="text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2">Parameters:</p>
                                                    <div class="bg-white dark:bg-black/20 rounded p-3 text-xs font-mono">
                                                        <span class="text-gray-600 dark:text-gray-400">None</span>
                                                    </div>
                                                </div>
                                                <div class="mb-3">
                                                    <p class="text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2">Returns:</p>
                                                    <div class="bg-white dark:bg-black/20 rounded p-3 text-xs font-mono overflow-x-auto">
<pre class="text-gray-800 dark:text-gray-200">{
  "plan": "Analyzed requirements. Identified 2 tasks: login-form, auth-api",
  "define_tasks": "Created task list with 2 tasks",
  "feature_development.login-form.implement": "Implemented login form with...",
  "feature_development.login-form.test": "All tests passing",
  "feature_development.login-form.review": "Code looks good, no issues"
}</pre>
                                                    </div>
                                                </div>
                                                <p class="text-xs text-gray-600 dark:text-gray-400 mt-3">
                                                    This enables agents to reference earlier work and build upon previous decisions.
                                                </p>
                                            </div>
                                        </div>

                                        <!-- Tool: session_create -->
                                        <div class="mb-6">
                                            <div class="bg-gray-100 dark:bg-black/30 rounded-lg p-5">
                                                <h4 class="text-lg font-bold text-gray-900 dark:text-white mb-3">
                                                    <code class="text-base bg-gray-200 dark:bg-black/40 px-2 py-1 rounded">session_create</code>
                                                </h4>
                                                <p class="text-sm text-gray-600 dark:text-gray-400 mb-3">
                                                    Request creation of a new Lanes session. Writes a config file to <code class="text-xs bg-gray-200 dark:bg-black/30 px-1 rounded">~/.claude/lanes/pending-sessions/</code> that the VS Code extension monitors and processes.
                                                </p>
                                                <div class="mb-3">
                                                    <p class="text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2">Parameters:</p>
                                                    <div class="bg-white dark:bg-black/20 rounded p-3 text-xs font-mono">
                                                        <div class="mb-2">
                                                            <span class="text-blue-600 dark:text-blue-400">name</span>
                                                            <span class="text-gray-500">: string</span>
                                                            <span class="text-gray-600 dark:text-gray-400 ml-2">// Session name (sanitized for git)</span>
                                                        </div>
                                                        <div class="mb-2">
                                                            <span class="text-blue-600 dark:text-blue-400">sourceBranch</span>
                                                            <span class="text-gray-500">: string</span>
                                                            <span class="text-gray-600 dark:text-gray-400 ml-2">// Branch to create worktree from</span>
                                                        </div>
                                                        <div class="mb-2">
                                                            <span class="text-blue-600 dark:text-blue-400">prompt</span>
                                                            <span class="text-gray-500">?: string</span>
                                                            <span class="text-gray-600 dark:text-gray-400 ml-2">// Optional starting prompt</span>
                                                        </div>
                                                        <div>
                                                            <span class="text-blue-600 dark:text-blue-400">workflow</span>
                                                            <span class="text-gray-500">?: string</span>
                                                            <span class="text-gray-600 dark:text-gray-400 ml-2">// Workflow template (feature, bugfix, etc.)</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="mb-3">
                                                    <p class="text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2">Returns:</p>
                                                    <div class="bg-white dark:bg-black/20 rounded p-3 text-xs font-mono">
<pre class="text-gray-800 dark:text-gray-200">{
  "success": true,
  "configPath": "~/.claude/lanes/pending-sessions/fix-auth-bug-1736454321.json"
}</pre>
                                                    </div>
                                                </div>
                                                <div>
                                                    <p class="text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2">Example Usage:</p>
                                                    <div class="bg-white dark:bg-black/20 rounded p-3 text-xs font-mono overflow-x-auto">
<pre class="text-gray-800 dark:text-gray-200"><span class="text-purple-600 dark:text-purple-400">session_create</span>(
  <span class="text-green-600 dark:text-green-400">"fix-auth-bug"</span>,
  <span class="text-green-600 dark:text-green-400">"main"</span>,
  <span class="text-green-600 dark:text-green-400">"Fix authentication timeout issue"</span>,
  <span class="text-green-600 dark:text-green-400">"bugfix"</span>
)</pre>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Workflow State Persistence -->
                                    <div>
                                        <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">Workflow State Persistence</h3>
                                        <p class="text-gray-600 dark:text-gray-400 mb-4">
                                            The MCP server persists workflow state to <code class="text-xs bg-gray-200 dark:bg-black/30 px-1 rounded">workflow-state.json</code> in the worktree root after every state change. This enables:
                                        </p>
                                        <ul class="list-disc list-inside text-gray-600 dark:text-gray-400 space-y-2 ml-4 mb-4">
                                            <li><strong class="text-gray-900 dark:text-white">Resume capability:</strong> If Claude crashes or loses context, calling <code class="text-xs bg-gray-200 dark:bg-black/30 px-1 rounded">workflow_start</code> again restores to the current position</li>
                                            <li><strong class="text-gray-900 dark:text-white">Context preservation:</strong> All step outputs are stored and accessible via <code class="text-xs bg-gray-200 dark:bg-black/30 px-1 rounded">workflow_context</code></li>
                                            <li><strong class="text-gray-900 dark:text-white">Progress tracking:</strong> Current step, task progress, and completion status are persisted</li>
                                        </ul>
                                        <div class="mb-4">
                                            <p class="text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2">Example workflow-state.json:</p>
                                            <div class="bg-gray-100 dark:bg-black/30 rounded-lg p-4 text-xs font-mono overflow-x-auto">
<pre class="text-gray-800 dark:text-gray-300">{
  "status": "active",
  "currentStepIndex": 2,
  "currentSubStepIndex": 1,
  "currentTaskIndex": 0,
  "stepOutputs": {
    "plan": "Analyzed requirements...",
    "define_tasks": "Created task list...",
    "feature_development.login-form.implement": "Implemented login form..."
  },
  "loopTasks": {
    "feature_development": [
      {
        "id": "login-form",
        "title": "Create login form",
        "description": "Build login form with email and password",
        "status": "in_progress"
      },
      {
        "id": "auth-api",
        "title": "Implement auth API",
        "description": "Create API endpoint for authentication",
        "status": "pending"
      }
    ]
  },
  "summary": "Add user authentication"
}</pre>
                                            </div>
                                        </div>
                                        <div class="bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4">
                                            <p class="text-sm text-yellow-900 dark:text-yellow-300">
                                                <strong>Important:</strong> The workflow state file is automatically managed by the MCP server. Do not manually edit this file.
                                            </p>
                                        </div>
                                    </div>

                                    <!-- Example Usage Flow -->
                                    <div>
                                        <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">Example Usage Flow</h3>
                                        <p class="text-gray-600 dark:text-gray-400 mb-4">
                                            Here's how Claude uses the MCP tools to execute a typical workflow:
                                        </p>
                                        <div class="bg-gray-100 dark:bg-black/30 rounded-lg p-6">
                                            <div class="space-y-4 text-sm font-mono">
                                                <div>
                                                    <div class="text-purple-600 dark:text-purple-400 mb-1">// 1. Start the workflow</div>
                                                    <div class="bg-white dark:bg-black/20 rounded p-3 mb-2">
                                                        <span class="text-gray-700 dark:text-gray-300">Claude calls: </span>
                                                        <span class="text-blue-600 dark:text-blue-400">workflow_start</span>(<span class="text-green-600 dark:text-green-400">"Add user authentication"</span>)
                                                    </div>
                                                    <div class="bg-white dark:bg-black/20 rounded p-3">
                                                        <span class="text-gray-700 dark:text-gray-300">Returns: </span>
                                                        <span class="text-gray-600 dark:text-gray-400">"Step 1: plan" with instructions</span>
                                                    </div>
                                                </div>

                                                <div class="border-l-2 border-blue-500 pl-4">
                                                    <div class="text-purple-600 dark:text-purple-400 mb-1">// 2. Claude reads code and plans the work</div>
                                                    <div class="text-gray-600 dark:text-gray-400 mb-2">Analyzes codebase, identifies 2 tasks needed...</div>
                                                    <div class="bg-white dark:bg-black/20 rounded p-3 mb-2">
                                                        <span class="text-gray-700 dark:text-gray-300">Claude calls: </span>
                                                        <span class="text-blue-600 dark:text-blue-400">workflow_advance</span>(<span class="text-green-600 dark:text-green-400">"Analyzed requirements. Need 2 tasks: login form and auth API"</span>)
                                                    </div>
                                                    <div class="bg-white dark:bg-black/20 rounded p-3">
                                                        <span class="text-gray-700 dark:text-gray-300">Returns: </span>
                                                        <span class="text-gray-600 dark:text-gray-400">"Step 2: define_tasks" with instructions</span>
                                                    </div>
                                                </div>

                                                <div class="border-l-2 border-green-500 pl-4">
                                                    <div class="text-purple-600 dark:text-purple-400 mb-1">// 3. Define the task list</div>
                                                    <div class="bg-white dark:bg-black/20 rounded p-3 mb-2 overflow-x-auto">
<pre class="text-gray-800 dark:text-gray-200"><span class="text-gray-700 dark:text-gray-300">Claude calls: </span><span class="text-blue-600 dark:text-blue-400">workflow_set_tasks</span>(<span class="text-green-600 dark:text-green-400">"feature_development"</span>, [
  { <span class="text-blue-600 dark:text-blue-400">id</span>: <span class="text-green-600 dark:text-green-400">"login-form"</span>, <span class="text-blue-600 dark:text-blue-400">title</span>: <span class="text-green-600 dark:text-green-400">"Create login form"</span>, ... },
  { <span class="text-blue-600 dark:text-blue-400">id</span>: <span class="text-green-600 dark:text-green-400">"auth-api"</span>, <span class="text-blue-600 dark:text-blue-400">title</span>: <span class="text-green-600 dark:text-green-400">"Implement auth API"</span>, ... }
])</pre>
                                                    </div>
                                                    <div class="bg-white dark:bg-black/20 rounded p-3">
                                                        <span class="text-gray-700 dark:text-gray-300">Returns: </span>
                                                        <span class="text-gray-600 dark:text-gray-400">"Task 1/2: implement login-form" with instructions</span>
                                                    </div>
                                                </div>

                                                <div class="border-l-2 border-yellow-500 pl-4">
                                                    <div class="text-purple-600 dark:text-purple-400 mb-1">// 4. Implement the first task</div>
                                                    <div class="text-gray-600 dark:text-gray-400 mb-2">Claude writes the login form code...</div>
                                                    <div class="bg-white dark:bg-black/20 rounded p-3 mb-2">
                                                        <span class="text-gray-700 dark:text-gray-300">Claude calls: </span>
                                                        <span class="text-blue-600 dark:text-blue-400">workflow_advance</span>(<span class="text-green-600 dark:text-green-400">"Implemented login form with email and password fields"</span>)
                                                    </div>
                                                    <div class="bg-white dark:bg-black/20 rounded p-3">
                                                        <span class="text-gray-700 dark:text-gray-300">Returns: </span>
                                                        <span class="text-gray-600 dark:text-gray-400">"Task 1/2: test login-form" with instructions</span>
                                                    </div>
                                                </div>

                                                <div class="border-l-2 border-red-500 pl-4">
                                                    <div class="text-purple-600 dark:text-purple-400 mb-1">// 5. Run tests</div>
                                                    <div class="text-gray-600 dark:text-gray-400 mb-2">Claude runs test suite, fixes any failures...</div>
                                                    <div class="bg-white dark:bg-black/20 rounded p-3 mb-2">
                                                        <span class="text-gray-700 dark:text-gray-300">Claude calls: </span>
                                                        <span class="text-blue-600 dark:text-blue-400">workflow_advance</span>(<span class="text-green-600 dark:text-green-400">"All tests pass"</span>)
                                                    </div>
                                                    <div class="bg-white dark:bg-black/20 rounded p-3">
                                                        <span class="text-gray-700 dark:text-gray-300">Returns: </span>
                                                        <span class="text-gray-600 dark:text-gray-400">"Task 1/2: review login-form" with instructions</span>
                                                    </div>
                                                </div>

                                                <div class="text-gray-600 dark:text-gray-400 text-center py-2">
                                                    ... and so on through all tasks and steps ...
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- MCP Configuration -->
                                    <div>
                                        <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">MCP Configuration</h3>
                                        <p class="text-gray-600 dark:text-gray-400 mb-4">
                                            The Lanes MCP server is automatically configured when you create a workflow session. The VS Code extension:
                                        </p>
                                        <ol class="list-decimal list-inside text-gray-600 dark:text-gray-400 space-y-2 ml-4 mb-4">
                                            <li>Spawns the MCP server process with the workflow path and worktree path</li>
                                            <li>Generates a <code class="text-xs bg-gray-200 dark:bg-black/30 px-1 rounded">.claude/mcp.json</code> config file in the worktree</li>
                                            <li>Passes the config to Claude Code via the <code class="text-xs bg-gray-200 dark:bg-black/30 px-1 rounded">--mcp-config</code> flag</li>
                                        </ol>
                                        <div class="mb-4">
                                            <p class="text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2">Generated .claude/mcp.json:</p>
                                            <div class="bg-gray-100 dark:bg-black/30 rounded-lg p-4 text-xs font-mono overflow-x-auto">
<pre class="text-gray-800 dark:text-gray-300">{
  "mcpServers": {
    "lanes-workflow": {
      "command": "node",
      "args": [
        "/path/to/lanes/dist/mcp/server.js",
        "--worktree", "/path/to/worktree",
        "--workflow-path", "/path/to/workflow.yaml"
      ]
    }
  }
}</pre>
                                            </div>
                                        </div>
                                        <p class="text-gray-600 dark:text-gray-400">
                                            The MCP server runs in the background for the lifetime of the session. It's automatically stopped when the session is closed.
                                        </p>
                                    </div>

                                    <!-- Next Steps -->
                                    <div class="bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-6">
                                        <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-3">Next Steps</h3>
                                        <p class="text-gray-700 dark:text-gray-300 mb-4">
                                            Now that you understand the Lanes MCP server, you might want to:
                                        </p>
                                        <ul class="space-y-2 text-sm text-gray-700 dark:text-gray-300">
                                            <li class="flex items-center gap-2">
                                                <svg class="w-4 h-4 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                                </svg>
                                                <span>Explore the MCP server source code in <code class="text-xs bg-blue-200 dark:bg-blue-900/50 px-1 rounded">src/mcp/</code></span>
                                            </li>
                                            <li class="flex items-center gap-2">
                                                <svg class="w-4 h-4 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                                </svg>
                                                <a href="#workflow-templates" class="text-vscode-accent hover:underline">Review the Workflow Templates documentation</a> to understand how workflows are structured
                                            </li>
                                            <li class="flex items-center gap-2">
                                                <svg class="w-4 h-4 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                                </svg>
                                                <a href="https://modelcontextprotocol.io/" class="text-vscode-accent hover:underline" target="_blank">Read the MCP specification</a> to understand the protocol
                                            </li>
                                            <li class="flex items-center gap-2">
                                                <svg class="w-4 h-4 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                                </svg>
                                                <span>Try creating a workflow session and observe the MCP tools in action</span>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </section>

                    </div>
                </div>

            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="border-t border-gray-200 dark:border-white/10 py-12 bg-gray-100 dark:bg-vscode-sidebar">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <p class="text-gray-500 mb-4">
                <span class="text-green-600 dark:text-green-400">Free &amp; Open Source</span> under MIT License. Built by <a href="https://github.com/FilipeJesus" class="text-blue-600 dark:text-blue-400 hover:underline">FilipeJesus</a>.
            </p>
            <div class="flex justify-center gap-6">
                <a href="https://github.com/FilipeJesus/lanes" class="text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors">GitHub</a>
                <a href="https://github.com/FilipeJesus/lanes/issues" class="text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors">Issues</a>
                <a href="https://marketplace.visualstudio.com/items?itemName=FilipeMarquesJesus.claude-lanes" class="text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors">VS Code Marketplace</a>
            </div>
        </div>
    </footer>

    <script>
        // Theme toggle functionality (desktop and mobile)
        const themeToggle = document.getElementById('theme-toggle');
        const themeToggleMobile = document.getElementById('theme-toggle-mobile');
        const sunIcon = document.getElementById('sun-icon');
        const moonIcon = document.getElementById('moon-icon');
        const sunIconMobile = document.getElementById('sun-icon-mobile');
        const moonIconMobile = document.getElementById('moon-icon-mobile');

        function updateIcons() {
            if (document.documentElement.classList.contains('dark')) {
                sunIcon.classList.add('hidden');
                moonIcon.classList.remove('hidden');
                sunIconMobile.classList.add('hidden');
                moonIconMobile.classList.remove('hidden');
            } else {
                sunIcon.classList.remove('hidden');
                moonIcon.classList.add('hidden');
                sunIconMobile.classList.remove('hidden');
                moonIconMobile.classList.add('hidden');
            }
        }

        updateIcons();

        function toggleTheme() {
            if (document.documentElement.classList.contains('dark')) {
                document.documentElement.classList.remove('dark');
                localStorage.theme = 'light';
            } else {
                document.documentElement.classList.add('dark');
                localStorage.theme = 'dark';
            }
            updateIcons();
        }

        themeToggle.addEventListener('click', toggleTheme);
        themeToggleMobile.addEventListener('click', toggleTheme);

        // Main mobile navigation toggle (hamburger menu)
        const mainMobileNavToggle = document.getElementById('main-mobile-nav-toggle');
        const mainMobileNav = document.getElementById('main-mobile-nav');
        const hamburgerIcon = document.getElementById('hamburger-icon');
        const closeIcon = document.getElementById('close-icon');

        mainMobileNavToggle.addEventListener('click', () => {
            mainMobileNav.classList.toggle('hidden');
            hamburgerIcon.classList.toggle('hidden');
            closeIcon.classList.toggle('hidden');
        });

        // Close main mobile nav when clicking a link
        document.querySelectorAll('#main-mobile-nav a').forEach(link => {
            link.addEventListener('click', () => {
                mainMobileNav.classList.add('hidden');
                hamburgerIcon.classList.remove('hidden');
                closeIcon.classList.add('hidden');
            });
        });

        // Section names for mobile nav display
        const sectionNames = {
            'create-session': 'Create a New Session',
            'worktrees': 'Understanding Worktrees',
            'permission-modes': 'Permission Modes',
            'git-review': 'Reviewing Changes',
            'workflows-intro': 'Introduction to Workflows',
            'workflow-structure': 'Workflow Structure',
            'creating-workflow': 'Creating a Workflow',
            'lanes-mcp': 'Lanes MCP'
        };

        // Docs sidebar mobile navigation toggle
        const mobileNavToggle = document.getElementById('mobile-nav-toggle');
        const mobileNav = document.getElementById('mobile-nav');
        const mobileNavIcon = document.getElementById('mobile-nav-icon');
        const mobileNavCurrent = document.getElementById('mobile-nav-current');

        mobileNavToggle.addEventListener('click', () => {
            mobileNav.classList.toggle('hidden');
            mobileNavIcon.style.transform = mobileNav.classList.contains('hidden') ? 'rotate(0deg)' : 'rotate(180deg)';
        });

        // Section navigation functionality
        const sidebarLinks = document.querySelectorAll('.sidebar-link');
        const mobileNavLinks = document.querySelectorAll('.mobile-nav-link');
        const sections = document.querySelectorAll('.doc-section');

        function showSection(sectionId) {
            // Hide all sections
            sections.forEach(section => {
                section.classList.add('hidden');
            });

            // Show the target section
            const targetSection = document.getElementById(sectionId);
            if (targetSection) {
                targetSection.classList.remove('hidden');
            }

            // Update sidebar active state
            sidebarLinks.forEach(link => {
                link.classList.remove('active');
                if (link.dataset.section === sectionId) {
                    link.classList.add('active');
                }
            });

            // Update mobile nav active state
            mobileNavLinks.forEach(link => {
                link.classList.remove('active');
                if (link.dataset.section === sectionId) {
                    link.classList.add('active');
                }
            });

            // Update mobile nav current section text
            if (mobileNavCurrent && sectionNames[sectionId]) {
                mobileNavCurrent.textContent = sectionNames[sectionId];
            }

            // Close mobile nav
            mobileNav.classList.add('hidden');
            mobileNavIcon.style.transform = 'rotate(0deg)';

            // Scroll to top of content area
            window.scrollTo({ top: 0, behavior: 'smooth' });

            // Update URL hash without triggering scroll
            history.replaceState(null, null, `#${sectionId}`);
        }

        // Add click handlers to sidebar links
        sidebarLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const sectionId = link.dataset.section;
                showSection(sectionId);
            });
        });

        // Add click handlers to mobile nav links
        mobileNavLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const sectionId = link.dataset.section;
                showSection(sectionId);
            });
        });

        // Handle internal anchor links to sections
        document.querySelectorAll('a[href^="#"]').forEach(link => {
            link.addEventListener('click', (e) => {
                const sectionId = link.getAttribute('href').slice(1);
                if (sectionNames[sectionId]) {
                    e.preventDefault();
                    showSection(sectionId);
                }
            });
        });

        // Handle initial load with hash in URL
        window.addEventListener('load', () => {
            const hash = window.location.hash.slice(1);
            if (hash && sectionNames[hash]) {
                showSection(hash);
            }
        });
    </script>
</body>
</html>
