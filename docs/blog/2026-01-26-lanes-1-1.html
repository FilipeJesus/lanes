<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lanes 1.1: Changing Lanes In a Fast Agentic World - Lanes</title>
    <meta name="description" content="Manage multiple, isolated Claude Code sessions directly inside VS Code.">
    <link rel="icon" type="image/png" href="https://github.com/FilipeJesus/lanes/raw/main/media/lanes-default-64px.png">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700;0,9..40,800;1,9..40,400&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        surface: {
                            0: 'var(--surface-0)',
                            1: 'var(--surface-1)',
                            2: 'var(--surface-2)',
                            3: 'var(--surface-3)',
                        },
                        accent: 'var(--accent)',
                        'accent-dim': 'var(--accent-dim)',
                        ink: {
                            DEFAULT: 'var(--ink)',
                            muted: 'var(--ink-muted)',
                            faint: 'var(--ink-faint)',
                        },
                        border: 'var(--border)',
                    },
                    fontFamily: {
                        display: ['"DM Sans"', 'system-ui', 'sans-serif'],
                        body: ['"DM Sans"', 'system-ui', 'sans-serif'],
                        mono: ['"JetBrains Mono"', 'Menlo', 'Monaco', 'Consolas', 'monospace'],
                    },
                }
            }
        }
    </script>
    <script>
        if (localStorage.theme === 'light') {
            document.documentElement.classList.remove('dark');
        } else {
            document.documentElement.classList.add('dark');
        }
    </script>
    <style>
        /* --- Theme tokens --- */
        :root {
            --surface-0: #f8f7f5;
            --surface-1: #efeeeb;
            --surface-2: #e6e4e0;
            --surface-3: #dddbd6;
            --accent: #0969da;
            --accent-dim: rgba(9, 105, 218, 0.12);
            --ink: #1c1917;
            --ink-muted: #57534e;
            --ink-faint: #a8a29e;
            --border: rgba(0, 0, 0, 0.08);
        }
        .dark {
            --surface-0: #121110;
            --surface-1: #1a1918;
            --surface-2: #242220;
            --surface-3: #2e2c29;
            --accent: #58a6ff;
            --accent-dim: rgba(88, 166, 255, 0.10);
            --ink: #e7e5e4;
            --ink-muted: #a8a29e;
            --ink-faint: #57534e;
            --border: rgba(255, 255, 255, 0.06);
        }

        /* --- Grain overlay --- */
        body::before {
            content: '';
            position: fixed;
            inset: 0;
            z-index: 9999;
            pointer-events: none;
            opacity: 0.025;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
            background-repeat: repeat;
            background-size: 256px 256px;
        }

        /* --- Mobile nav --- */
        .mobile-nav {
            transform: translateX(100%);
            transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .mobile-nav.open {
            transform: translateX(0);
        }
        .mobile-backdrop {
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }
        .mobile-backdrop.open {
            opacity: 1;
            pointer-events: auto;
        }

        /* --- Prose styles --- */
        .prose h1 { font-size: 2em; font-weight: bold; margin: 0.67em 0; color: var(--ink); }
        .prose h2 { font-size: 1.5em; font-weight: bold; margin: 0.83em 0; color: var(--ink); }
        .prose h3 { font-size: 1.17em; font-weight: bold; margin: 1em 0; color: var(--ink); }
        .prose p { margin: 1em 0; line-height: 1.7; color: var(--ink-muted); }
        .prose ul, .prose ol { margin: 1em 0; padding-left: 1.5em; }
        .prose ul { list-style-type: disc; }
        .prose ul ul { list-style-type: circle; }
        .prose ul ul ul { list-style-type: square; }
        .prose ol { list-style-type: decimal; }
        .prose li { margin: 0.5em 0; color: var(--ink-muted); }
        .prose a { color: var(--accent); text-decoration: underline; }
        .prose a:hover { opacity: 0.8; }
        .prose code { background: var(--surface-2); color: var(--ink-muted); padding: 0.2em 0.4em; border-radius: 3px; font-size: 0.9em; font-family: 'JetBrains Mono', Menlo, Monaco, Consolas, monospace; }
        .prose pre { background: var(--surface-2); color: var(--ink-muted); padding: 1em; border-radius: 6px; overflow-x: auto; margin: 1em 0; border: 1px solid var(--border); }
        .prose pre code { background: transparent; padding: 0; color: inherit; }
        .prose img { max-width: 100%; border-radius: 8px; margin: 1em 0; border: 1px solid var(--border); }
        .prose blockquote { border-left: 4px solid var(--accent); padding-left: 1em; margin: 1em 0; color: var(--ink-muted); }
        .prose table { border-collapse: separate; border-spacing: 0; width: 100%; margin: 1em 0; font-size: 0.95em; border: 1px solid var(--border); border-radius: 6px; overflow: hidden; }
        .prose table thead { background: var(--surface-2); border-bottom: 2px solid var(--border); }
        .prose table th { padding: 0.75em 1em; text-align: left; font-weight: 600; color: var(--ink); border-right: 1px solid var(--border); }
        .prose table th:last-child { border-right: none; }
        .prose table td { padding: 0.75em 1em; border-right: 1px solid var(--border); border-bottom: 1px solid var(--border); }
        .prose table td:last-child { border-right: none; }
        .prose table tbody tr:last-child td { border-bottom: none; }
        .prose table tbody tr:nth-child(even) { background: var(--surface-1); }
        .prose table tbody tr:hover { background: var(--surface-2); }
    </style>
</head>
<body class="bg-surface-0 text-ink font-body antialiased selection:bg-accent selection:text-white">

    <!-- Mobile nav backdrop -->
    <div id="mobile-backdrop" class="mobile-backdrop fixed inset-0 z-40 bg-black/50 backdrop-blur-sm md:hidden"></div>

    <!-- Mobile nav drawer -->
    <div id="mobile-nav" class="mobile-nav fixed top-0 right-0 bottom-0 w-72 z-50 bg-surface-1 border-l border-border p-6 flex flex-col md:hidden">
        <div class="flex items-center justify-between mb-8">
            <span class="text-lg font-semibold text-ink">Menu</span>
            <button id="mobile-nav-close" class="p-2 -mr-2 rounded-lg hover:bg-surface-2 transition-colors" aria-label="Close menu">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
            </button>
        </div>
        <nav class="flex flex-col gap-1">
            <a href="../index.html" class="px-3 py-2.5 rounded-lg text-ink-muted hover:text-ink hover:bg-surface-2 transition-colors">Home</a>
            <a href="../index.html#features" class="px-3 py-2.5 rounded-lg text-ink-muted hover:text-ink hover:bg-surface-2 transition-colors">Features</a>
            <a href="../index.html#how-it-works" class="px-3 py-2.5 rounded-lg text-ink-muted hover:text-ink hover:bg-surface-2 transition-colors">How it Works</a>
            <a href="index.html" class="px-3 py-2.5 rounded-lg text-accent font-medium">Blog</a>
            <a href="../docs.html" class="px-3 py-2.5 rounded-lg text-ink-muted hover:text-ink hover:bg-surface-2 transition-colors">Docs</a>
        </nav>
        <div class="mt-auto pt-6 border-t border-border flex flex-col gap-3">
            <a href="https://marketplace.visualstudio.com/items?itemName=FilipeMarquesJesus.lanes" class="flex items-center justify-center gap-2 bg-ink text-surface-0 dark:bg-white dark:text-surface-0 px-4 py-2.5 rounded-lg font-semibold text-sm">
                Install from Marketplace
            </a>
            <a href="https://github.com/FilipeJesus/lanes" class="flex items-center justify-center gap-2 border border-border px-4 py-2.5 rounded-lg font-medium text-sm text-ink-muted hover:text-ink transition-colors">
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z" clip-rule="evenodd"/></svg>
                View on GitHub
            </a>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="fixed w-full z-30 bg-surface-0/80 backdrop-blur-md border-b border-border">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-14">
                <div class="flex items-center gap-2.5">
                    <img src="https://github.com/FilipeJesus/lanes/raw/main/media/lanes-default-64px.png" alt="Lanes Logo" class="w-7 h-7">
                    <span class="text-lg font-bold text-ink tracking-tight font-display">Lanes</span>
                    <span class="hidden sm:inline text-[10px] uppercase tracking-widest font-mono font-medium text-emerald-600 dark:text-emerald-400 bg-emerald-500/10 px-2 py-0.5 rounded">Free</span>
                </div>
                <div class="hidden md:flex items-center gap-1">
                    <a href="../index.html" class="px-3 py-1.5 rounded-md text-sm text-ink-muted hover:text-ink transition-colors">Home</a>
                    <a href="../index.html#features" class="px-3 py-1.5 rounded-md text-sm text-ink-muted hover:text-ink transition-colors">Features</a>
                    <a href="../index.html#how-it-works" class="px-3 py-1.5 rounded-md text-sm text-ink-muted hover:text-ink transition-colors">How it Works</a>
                    <a href="index.html" class="px-3 py-1.5 rounded-md text-sm font-medium text-accent">Blog</a>
                    <a href="../docs.html" class="px-3 py-1.5 rounded-md text-sm text-ink-muted hover:text-ink transition-colors">Docs</a>
                    <span class="w-px h-5 bg-border mx-2"></span>
                    <a href="https://github.com/FilipeJesus/lanes" class="px-3 py-1.5 rounded-md text-sm text-ink-muted hover:text-ink transition-colors flex items-center gap-1.5">
                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z" clip-rule="evenodd"/></svg>
                        GitHub
                    </a>
                    <button id="theme-toggle" class="ml-1 p-2 rounded-lg hover:bg-surface-2 transition-colors" aria-label="Toggle theme">
                        <svg id="sun-icon" class="w-4 h-4 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/></svg>
                        <svg id="moon-icon" class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/></svg>
                    </button>
                </div>
                <!-- Mobile: theme toggle + hamburger -->
                <div class="flex items-center gap-1 md:hidden">
                    <button id="theme-toggle-mobile" class="p-2 rounded-lg hover:bg-surface-2 transition-colors" aria-label="Toggle theme">
                        <svg id="sun-icon-m" class="w-4 h-4 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/></svg>
                        <svg id="moon-icon-m" class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/></svg>
                    </button>
                    <button id="mobile-nav-open" class="p-2 rounded-lg hover:bg-surface-2 transition-colors" aria-label="Open menu">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </nav>
    <main class="pt-24 pb-16">

    <article class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
      <nav class="mb-8 text-sm">
        <a href="index.html" class="text-accent hover:underline">&larr; Back to Blog</a>
      </nav>

      <header class="mb-8">
        <div class="flex flex-wrap gap-2 mb-4">
          <span class="text-xs bg-accent/15 text-accent px-2 py-1 rounded-full">release</span>
        </div>
        <h1 class="text-4xl sm:text-5xl font-extrabold text-ink tracking-tight font-display mb-4">
          Lanes 1.1: Changing Lanes In a Fast Agentic World
        </h1>
        <div class="flex items-center gap-4 text-sm text-ink-faint">
          <span>January 26, 2026</span>
          <span>&middot;</span>
          <span>5 min read</span>
        </div>
      </header>

      <div class="prose max-w-none">
        <p>In December, it felt like the world finally woke up to <strong>Claude Code</strong> This sudden fanaticism caught me by surprise, as a long term Claude Code user I hadn't really noticed much of a difference since the release of Claude's Opus 4.5 in November and to be honest, Opus wasn't much of an improvement over Sonnet 4.5 which released in September.</p>
<p>Despite this, the hype is justified, Claude Code has changed how I work. But let’s be real: it’s not perfect. Anthropic is certainly aware of this, recently they have been seriously ramping up development of new features in Claude Code, often implementing features inspired by the open-source community.</p>
<p>Key features introduced by Anthropic in the last 2 weeks:</p>
<ul>
<li><strong>Claude Cowork:</strong> A desktop app to manage sessions and handle work outside the programming space.</li>
</ul>
<ul>
<li><strong>Context Clearing:</strong> A prompted reset between planning and implementation stages.</li>
<li><strong>Task Management:</strong> A new, exciting system for tracking complex objectives.</li>
</ul>
<p>So where does this leave lanes?</p>
<h1>Introducing Lanes 1.1</h1>
<p>Fortunately, <strong>Lanes</strong> is safe. Nothing Anthropic has released overlaps with the Lanes workflow system. In fact, Lanes' session management remains superior for coders who prefer VS Code over the new Claude Desktop app. If anything, the new features make Lanes even better.</p>
<p>Here is what is new in Lanes 1.1</p>
<ul>
<li>New Task Support</li>
<li>Context management tools e.g. <code>clear</code> context</li>
<li>Artefact Tracking</li>
<li>Easy within session (worktree) search</li>
<li>Create new terminals in your session with ease</li>
<li>Setup chimes to get a audio notification when your session needs input.</li>
</ul>
<p>Further breakdown of these features below.</p>
<h2>Claude Code Tasks Support</h2>
<p>The new Claude Code task system takes a lot of inspiration from Beads, Gastown and Claude Flow. It replaces the todos system with a persistent coordination engine capable of managing complex projects with multiple dependencies. It creates a file-system-based dependency graph, the system ensures that tasks and their relationships ("blocked by") survive session restarts, context clearing, and terminal closures.</p>
<p>This architecture enables <strong>parallel agentic 'swarms,'</strong> allowing Claude to orchestrate multiple sub-agents simultaneously. This not only accelerates development but also optimises resources by automatically routing each task to the most appropriate model (e.g., Haiku for searches, Opus for reasoning).</p>
<p>Crucially, you must set the <code>CLAUDE_CODE_TASK_LIST_ID</code> environment variable for each Claude Code session for tasks to survive restarts. <strong>Lanes now handles this automatically</strong> for every session, ensuring smooth restarts.</p>
<h2>Clear Context</h2>
<p>Anthropic recently released a feature where Claude will now prompt you to clear its context between the planning and implementation stage of a workflow. The benefit of this is your orchestrator now has a clean context window to support larger feature development loops.</p>
<p>This is a nice feature if you manage all your work through artefacts, this is something I started doing using the Superpower plugin. To make this more deterministic Lanes now has a <code>context</code> field in the workflow steps. If this is set to <code>clear</code> lanes will clear your session when it reaches this step.</p>
<pre><code>steps:
- id: subagent-driven-development
  type: action
  context: clear
  instructions: |
    Here is where you will do the implementations.
    Use the "/subagent-driven-development" skill from superpower to start
</code></pre>
<p><em>Note: This field is optional and should only be used if you are confident in your workflow's ability to save plans in artefacts.</em></p>
<h2>Artefact Tracking</h2>
<p>You can now specify an <code>artefacts</code> field for your workflow steps. When set to <code>true</code>, Lanes introduces a hook to your Claude Code session that saves the path of any file created during that step.</p>
<p>Downstream steps are then made aware of these artefacts. Claude can decide whether to read them to gain context for the work ahead. This is vital if you clear your context before moving to the next step.</p>
<pre><code>steps:
- id: writing-plans
  type: action
  artefacts: true
  instructions: |
    In this step you will plan out the features based on the
    brainstorming you just did.
    Use the "/writing-plans" skill from superpower to start
</code></pre>
<h2>Session Search</h2>
<p>On each session you can click the search icon which will open the vscode search feature with the <code>include</code> box pre-populated for your worktree. This should hopefully be a nice quality of life feature.</p>
<p><img src="./media/worktree_search_preview.png" alt="Worktree Search"></p>
<h2>New Terminal</h2>
<p>This feature is simple, you can open a new terminal in your worktree through the lanes extension. All you need to do is <strong>Right click on your session -&gt; Click 'Create Terminal'</strong>. Nothing more to really say here, it will hopefully save you from needing to cd into worktrees multiple times a day.</p>
<p><img src="./media/create_new_terminal_preview.png" alt="New terminal Preview"></p>
<h2>Chimes [Preview]</h2>
<p>Lanes has always had a notification icon, but you won't always have your eyes on it. For sessions demanding immediate attention, you can now enable <strong>Chimes</strong>. <strong>Right click on your session -&gt; Click 'Enable Chime'</strong>.</p>
<p>Now, whenever Claude needs your input, you will hear a chime. You can select your preferred sound in the extension settings and test them using the 'Test Chime' command in your Command Palette.</p>
<p><em>Current Limitation: This works by making the session form emit a noise, meaning the session panel must be active for the chime to work. This is why the feature is currently in preview.</em></p>

      </div>


    </article>
    </main>

    <!-- Footer -->
    <footer class="border-t border-border py-10 bg-surface-0">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex flex-col sm:flex-row items-center justify-between gap-4">
                <p class="text-xs text-ink-faint text-center sm:text-left">
                    <span class="text-emerald-600 dark:text-emerald-400">Free &amp; Open Source</span> under MIT License.
                    Built by <a href="https://github.com/FilipeJesus" class="text-accent hover:underline">FilipeJesus</a>.
                </p>
                <div class="flex items-center gap-5 flex-wrap justify-center">
                    <a href="../index.html" class="text-xs text-ink-faint hover:text-ink transition-colors">Home</a>
                    <a href="index.html" class="text-xs text-ink-faint hover:text-ink transition-colors">Blog</a>
                    <a href="../docs.html" class="text-xs text-ink-faint hover:text-ink transition-colors">Docs</a>
                    <a href="https://github.com/FilipeJesus/lanes" class="text-xs text-ink-faint hover:text-ink transition-colors">GitHub</a>
                    <a href="https://github.com/FilipeJesus/lanes/issues" class="text-xs text-ink-faint hover:text-ink transition-colors">Issues</a>
                    <a href="https://marketplace.visualstudio.com/items?itemName=FilipeMarquesJesus.lanes" class="text-xs text-ink-faint hover:text-ink transition-colors">Marketplace</a>
                    <a href="https://open-vsx.org/extension/FilipeMarquesJesus/lanes" class="text-xs text-ink-faint hover:text-ink transition-colors">Open VSX</a>
                    <a href="https://www.paypal.com/donate/?business=JEYBHRR3E4PEU&no_recurring=0&item_name=Loving+Lanes?+I+am+too%21+Thank+you+so+much+for+supporting+it%27s+development.&currency_code=GBP" class="text-xs text-ink-faint hover:text-ink transition-colors">Donate</a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // --- Theme toggle ---
        function syncThemeIcons() {
            const isDark = document.documentElement.classList.contains('dark');
            ['', '-m'].forEach(suffix => {
                const sun = document.getElementById('sun-icon' + suffix);
                const moon = document.getElementById('moon-icon' + suffix);
                if (!sun || !moon) return;
                sun.classList.toggle('hidden', isDark);
                moon.classList.toggle('hidden', !isDark);
            });
        }
        syncThemeIcons();

        function toggleTheme() {
            const isDark = document.documentElement.classList.contains('dark');
            if (isDark) {
                document.documentElement.classList.remove('dark');
                localStorage.theme = 'light';
            } else {
                document.documentElement.classList.add('dark');
                localStorage.theme = 'dark';
            }
            syncThemeIcons();
        }

        document.getElementById('theme-toggle').addEventListener('click', toggleTheme);
        document.getElementById('theme-toggle-mobile').addEventListener('click', toggleTheme);

        // --- Mobile nav ---
        const mobileNav = document.getElementById('mobile-nav');
        const mobileBackdrop = document.getElementById('mobile-backdrop');

        function openMobileNav() {
            mobileNav.classList.add('open');
            mobileBackdrop.classList.add('open');
            document.body.style.overflow = 'hidden';
        }
        function closeMobileNav() {
            mobileNav.classList.remove('open');
            mobileBackdrop.classList.remove('open');
            document.body.style.overflow = '';
        }

        document.getElementById('mobile-nav-open').addEventListener('click', openMobileNav);
        document.getElementById('mobile-nav-close').addEventListener('click', closeMobileNav);
        mobileBackdrop.addEventListener('click', closeMobileNav);

        mobileNav.querySelectorAll('a').forEach(a => {
            a.addEventListener('click', () => {
                if (a.getAttribute('href').startsWith('#')) {
                    closeMobileNav();
                }
            });
        });
    </script>
</body>
</html>