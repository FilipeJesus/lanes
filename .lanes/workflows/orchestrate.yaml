name: orchestrate
description: Plan and create new lanes

agents:
  orchestrator:
    description: Does everything needed to plan and create lanes

loops:
  lane_starter:
    - id: lanes_user
      instructions: |
        Implement: {task.title}
        Description: {task.description}

        Create a new lane using the lanes MCP for this task.

steps:
  - id: plan
    type: action
    instructions: |
      Analyze the goal and break it into discrete feature requests.

  - id: define_tasks
    type: action
    instructions: |
      For each feature identified in the planning phase, define:
      - id: A unique identifier (e.g., 'add-x', 'fix-y')
      - title: A clear, concise title
      - description: Detailed description of what needs to be done

      Call workflow_set_tasks('lane_starter', tasks) when done.

  - id: lane_starter
    type: loop

  - id: final_review
    type: action
    instructions: |
      Make sure the worktrees for the planed lanes have been creat.
